<?xml version="1.0" encoding="utf-8"?>
<rss xmlns:content="http://purl.org/rss/1.0/modules/content/" version="2.0">
	<channel>
		<title>Kamranicus</title>
		<link>https://kamranicus.com/</link>
		<description>Kamran Ayub</description>
		<copyright>2018</copyright>
		<pubDate>Mon, 22 Oct 2018 04:03:22 GMT</pubDate>
		<lastBuildDate>Mon, 22 Oct 2018 04:03:22 GMT</lastBuildDate>
		<item>
			<title>Showing Custom UI on React Router Transitions</title>
			<link>https://kamranicus.com/posts/2018-07-26-react-router-custom-transition-ui</link>
			<description>&lt;p&gt;We had a recent requirement on our project to prompt the user with a custom modal when they have some pending changes to save in our application. The intention was to ensure they saved their changes as it affected other parts of the data they're working on and we need to recompute business rules (fun, huh?).&lt;/p&gt;</description>
			<guid>https://kamranicus.com/posts/2018-07-26-react-router-custom-transition-ui</guid>
			<pubDate>Thu, 26 Jul 2018 13:00:00 GMT</pubDate>
			<content:encoded>&lt;p&gt;We had a recent requirement on our project to prompt the user with a custom modal when they have some pending changes to save in our application. The intention was to ensure they saved their changes as it affected other parts of the data they're working on and we need to recompute business rules (fun, huh?).&lt;/p&gt;
&lt;p&gt;Since we're leveraging &lt;a href="https://reacttraining.com/react-router/web/guides/philosophy"&gt;React Router v4&lt;/a&gt;, I looked into what was provided out of the box to see how customizable it was.&lt;/p&gt;
&lt;h2 id="the-prompt-component"&gt;The Prompt Component&lt;/h2&gt;
&lt;p&gt;React Router core has a component called &lt;a href="https://reacttraining.com/react-router/core/api/Prompt"&gt;&lt;code&gt;Prompt&lt;/code&gt;&lt;/a&gt;. The purpose of this component is to &lt;a href="https://reacttraining.com/react-router/web/example/preventing-transitions"&gt;show a dialog to the user during a router transition&lt;/a&gt;. The &lt;code&gt;when&lt;/code&gt; prop can be set to enable/disable this functionality dynamically which is great. You can also pass a &lt;code&gt;message&lt;/code&gt; that will get displayed or a function that takes a &lt;code&gt;location&lt;/code&gt; and returns &lt;code&gt;true&lt;/code&gt; to allow navigation or a message to prevent.&lt;/p&gt;
&lt;pre&gt;&lt;code class="language-js"&gt;&amp;lt;Prompt when={true} message=&amp;quot;Please save your changes before proceeding&amp;quot; /&amp;gt;
&amp;lt;Prompt when={true} message={location =&amp;gt; location.pathname === &amp;quot;/foo&amp;quot; ? true : &amp;quot;Denied&amp;quot;} /&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src="https://user-images.githubusercontent.com/563819/43242206-4b62f540-9065-11e8-80bb-d4ca944cc9ea.png" class="img-fluid" alt="The default prompt" /&gt;&lt;/p&gt;
&lt;p&gt;However, I noticed a few caveats with this component. First, the default prompt is the browser prompt and when you click 'Okay' it &lt;em&gt;allows navigation&lt;/em&gt; which is exactly the opposite of what I want. Second, you can't render custom UI directly through &lt;code&gt;Prompt&lt;/code&gt;--it just takes a &lt;code&gt;message&lt;/code&gt;. Why? If you &lt;a href="https://github.com/ReactTraining/react-router/blob/e6f9017c947b3ae49affa24cc320d0a86f765b55/packages/react-router/modules/Prompt.js#L30"&gt;dive down&lt;/a&gt; into the code, it leverages the &lt;a href="https://www.npmjs.com/package/history"&gt;history&lt;/a&gt; npm package which just delegates to that browser prompt. The good news is, the &lt;code&gt;history&lt;/code&gt; package allows you to override the UI generation via &lt;a href="https://www.npmjs.com/package/history#customizing-the-confirm-dialog"&gt;&lt;code&gt;getUserConfirmation&lt;/code&gt;&lt;/a&gt;.&lt;/p&gt;
&lt;pre&gt;&lt;code class="language-js"&gt;import createHistory from &amp;quot;history/browserHistory&amp;quot;;

const history = createHistory({
  getUserConfirmation(message, callback) {
    // Show some custom dialog to the user and call
    // callback(true) to continue the transiton, or
    // callback(false) to abort it.
  }
});
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;This is helpful, using this we can always prevent the transition if needed. So, given that we can't use &lt;code&gt;Prompt&lt;/code&gt; directly to render custom React UI but we &lt;em&gt;can&lt;/em&gt; override the core handler for showing the prompt, is there a way to connect the two? Of course.&lt;/p&gt;
&lt;h2 id="overriding-getuserconfirmation"&gt;Overriding getUserConfirmation&lt;/h2&gt;
&lt;p&gt;First, let's test our assumption out and see if we can log the message we get from &lt;code&gt;Prompt&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Using the regular &lt;code&gt;BrowserRouter&lt;/code&gt; component from &lt;code&gt;react-router-dom&lt;/code&gt;, pass the &lt;code&gt;getUserConfirmation&lt;/code&gt; prop:&lt;/p&gt;
&lt;pre&gt;&lt;code class="language-js"&gt;const getUserConfirmation = (message, callback) =&amp;gt; {
  console.log(message);
  callback(false);
}

&amp;lt;BrowserRouter getUserConfirmation={getUserConfirmation}&amp;gt;
...
&amp;lt;/BrowserRouter&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;If like me you are using &lt;code&gt;connected-react-router&lt;/code&gt;, we can still customize the &lt;code&gt;createHistory&lt;/code&gt; call as shown above:&lt;/p&gt;
&lt;pre&gt;&lt;code class="language-js"&gt;...
import { createBrowserHistory } from 'history'
import { applyMiddleware, compose, createStore } from 'redux'
import { connectRouter, routerMiddleware } from 'connected-react-router'
...
const history = createBrowserHistory({
  getUserConfirmation(message, callback) {
    console.log(message);
    callback(false);
  }
})

const store = createStore(
  connectRouter(history)(rootReducer), // new root reducer with router state
  initialState,
  compose(
    applyMiddleware(
      routerMiddleware(history), // for dispatching history actions
      // ... other middlewares ...
    ),
  ),
)
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Then our Prompt:&lt;/p&gt;
&lt;pre&gt;&lt;code class="language-js"&gt;// MyComponent.js
&amp;lt;Prompt when={true} message=&amp;quot;Please save your changes before proceeding&amp;quot; /&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;If you set this up, when you try to navigate away from the page, you will not be able to and the message will be logged to the console.&lt;/p&gt;
&lt;p&gt;Great! Now you may be thinking, &amp;quot;We can just pass anything and it'll get passed through!&amp;quot; But you'd be wrong because that's what I thought too.&lt;/p&gt;
&lt;pre&gt;&lt;code class="language-js"&gt;const MyCustomDialogComponent = () =&amp;gt; &amp;lt;div /&amp;gt;

&amp;lt;Prompt
  when={true}
  message={MyCustomDialogComponent}
/&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;If you try this, nothing will be logged to the console and navigation will not be blocked. React Router uses prop-types to validate &lt;code&gt;message&lt;/code&gt; is a string (phooey!).&lt;/p&gt;
&lt;p&gt;So, we have to stick with strings. Is there another way besides doing a bunch of work to add support for this in &lt;code&gt;react-router&lt;/code&gt; directly (which'd be neat!)?&lt;/p&gt;
&lt;h2 id="using-a-hoc-with-a-global-symbol-based-trigger"&gt;Using a HOC with a Global Symbol-based Trigger&lt;/h2&gt;
&lt;p&gt;I landed on this approach as it seemed to be the less hacky way to achieve this. Essentially, since we can pass a string only to the &lt;code&gt;getUserConfirmation&lt;/code&gt;, I pass in the key for a global &lt;a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Symbol"&gt;Symbol&lt;/a&gt; and store a global trigger to signal to the React dialog component to show.&lt;/p&gt;
&lt;p&gt;If you haven't used &lt;code&gt;Symbol&lt;/code&gt; before, it is a primitive type in JavaScript introduced in ES6. What's neat about them is you can &amp;quot;register&amp;quot; them globally and they will be able to be looked up from other modules loaded within the same &amp;quot;code realm&amp;quot; (roughly the execution context of the engine). Well-known global symbols are built-in like &lt;code&gt;Symbol.iterator&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Why a &lt;code&gt;Symbol&lt;/code&gt; vs. just a regular string? A &lt;code&gt;Symbol&lt;/code&gt;-based property won't be &lt;a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Symbol#Symbols_and_for...in_iteration"&gt;enumerable&lt;/a&gt; (like using &lt;code&gt;Object.keys&lt;/code&gt;) so it's kind of a way to do basic &amp;quot;private&amp;quot; properties. They can still be enumerated with other methods like &lt;code&gt;Object.getOwnPropertySymbols&lt;/code&gt;. It creates a nice barrier between things your app might care about and walls it off unless someone explictly asks for that property.&lt;/p&gt;
&lt;p&gt;So what does this end up looking like? We create a HOC that has basic state and a method that will show the dialog when triggered (user attempts to navigate away). The &lt;code&gt;getUserConfirmation&lt;/code&gt; handler will receive the Symbol key and invoke the callback on the global object (&lt;code&gt;window&lt;/code&gt;) with that Symbol property.&lt;/p&gt;
&lt;pre&gt;&lt;code class="language-js"&gt;// PreventNavigationDialog.js
class PreventNavigationDialog extends React.Component {

  state = { open: false };

  constructor() {
    super();

    // NOTE: Don't actually use Date.now. In the example
    // repo, I use the `cuid` package
    this.__trigger = Symbol.for(`__PreventNavigationDialog_${Date.now()}`);
  }

  componentDidMount() {
    window[this.__trigger] = this.show;
  }

  componentWillUnmount() {
    delete window[this.__trigger];
  }

  render() {
    const { when } = this.props;
    const { open } = this.state;

    return (
      &amp;lt;React.Fragment&amp;gt;
        &amp;lt;Prompt when={when} message={Symbol.keyFor(this.__trigger)} /&amp;gt;
        {open &amp;amp;&amp;amp; &amp;lt;div onClick={this.close}&amp;gt;Test dialog&amp;lt;/div&amp;gt;}
      &amp;lt;/React.Fragment&amp;gt;
    );
  }

  show = allowTransitionCallback =&amp;gt; {
    this.setState({ open: true }, () =&amp;gt; allowTransitionCallback(false));
  };

  close = () =&amp;gt; {
    this.setState({ open: false });
  };
}
&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code class="language-js"&gt;// index.js

const getUserConfirmation = (dialogKey, callback) =&amp;gt; {

  // use &amp;quot;message&amp;quot; as Symbol-based key
  const dialogTrigger = window[Symbol.for(dialogKey)];

  if (dialogTrigger) {
    // delegate to dialog and pass callback through
    return dialogTrigger(callback);
  }

  // Fallback to allowing navigation
  callback(true);
}

&amp;lt;BrowserRouter getUserConfirmation={getUserConfirmation}&amp;gt;
...
&amp;lt;/BrowserRouter&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Okay, a bit going on here!&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;First, define our shared Symbol. Using &lt;code&gt;Symbol.for&lt;/code&gt; will register the Symbol globally so it can be accessed across the page. We assign it a unique key for lookup (I recommend &lt;a href="https://www.npmjs.com/package/cuid"&gt;&lt;code&gt;cuid&lt;/code&gt;&lt;/a&gt; for real world usage).&lt;/li&gt;
&lt;li&gt;Next, define our HOC with some basic state. It takes in a &lt;code&gt;when&lt;/code&gt; prop just like &lt;code&gt;Prompt&lt;/code&gt; (and passes it down). It also has a simple &lt;code&gt;open&lt;/code&gt; flag.&lt;/li&gt;
&lt;li&gt;When our HOC mounts, it registers our &lt;code&gt;show&lt;/code&gt; trigger globally. It cleans up in case it is unmounted.&lt;/li&gt;
&lt;li&gt;Modify &lt;code&gt;getUserConfirmation&lt;/code&gt; to check and see if a dialog trigger callback exists and call it if so. Since we assign it when the HOC mounts, it will set the state of the dialog.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;The nice thing about this design is that we're allowing for multiple potential dialog prompts across the app. We can even have multiple instances of this component without conflict using the uniqueness nature of Symbols. I'm not a huge fan of using &lt;code&gt;window&lt;/code&gt; but it has its uses--it's tough to avoid &lt;em&gt;something&lt;/em&gt; due to how we need to access it in &lt;code&gt;getUserConfirmation&lt;/code&gt; and we can't pass anything but a string.&lt;/p&gt;
&lt;h2 id="demo-and-code"&gt;Demo and Code&lt;/h2&gt;
&lt;p&gt;&lt;img src="https://user-images.githubusercontent.com/563819/43242522-2e47c664-9067-11e8-8799-0e2c9723bf9f.png" class="img-fluid" alt="End result" /&gt;&lt;/p&gt;
&lt;p&gt;You can play with the &lt;a href="https://codesandbox.io/s/myw173jyq8"&gt;fully working CRA-based demo&lt;/a&gt; with Material UI on CodeSandbox or the &lt;a href="https://github.com/kamranayub/example-react-router-transition-ui/tree/master/"&gt;corresponding GitHub repo&lt;/a&gt;. The demo has a few more features like passing &lt;code&gt;title&lt;/code&gt; and &lt;code&gt;message&lt;/code&gt; content as well as using the &lt;code&gt;(location: Location) =&amp;gt; boolean | string&lt;/code&gt; overload that &lt;code&gt;Prompt&lt;/code&gt; &lt;code&gt;message&lt;/code&gt; prop supports to decide whether to allow transitions based on target location (we use this for our app).&lt;/p&gt;
&lt;p&gt;It wouldn't take much to change this HOC to leverage the render props pattern, for example, to show &lt;em&gt;whatever you want&lt;/em&gt; by passing down &lt;code&gt;show&lt;/code&gt;. Reuse it across your app!&lt;/p&gt;
&lt;p&gt;This was an interesting issue to solve and it wasn't as easy as I hoped initially. I hope this helps other people! This could probably be packaged up as a customizable HOC with a little work. Maybe when I have a spare moment I'll stream making a package out of this. Remember to follow me on &lt;a href="https://twitch.tv/kamranicus"&gt;Twitch&lt;/a&gt;!&lt;/p&gt;
</content:encoded>
		</item>
		<item>
			<title>Flattening Deeply Nested Components in React</title>
			<link>https://kamranicus.com/posts/2018-07-07-react-nesting-components-flat</link>
			<description>&lt;p&gt;Here's a quick tip. Often in entry points of React applications, you have to do some bootstrapping with various providers from dependent modules like Material UI, Redux, JSS, and React Router. That's exactly the stack I'm using so that's what my example is based on.&lt;/p&gt;</description>
			<guid>https://kamranicus.com/posts/2018-07-07-react-nesting-components-flat</guid>
			<pubDate>Sat, 07 Jul 2018 15:33:00 GMT</pubDate>
			<content:encoded>&lt;p&gt;Here's a quick tip. Often in entry points of React applications, you have to do some bootstrapping with various providers from dependent modules like Material UI, Redux, JSS, and React Router. That's exactly the stack I'm using so that's what my example is based on.&lt;/p&gt;
&lt;p&gt;Normally, you would do this to bootstrap your &lt;code&gt;App&lt;/code&gt; component:&lt;/p&gt;
&lt;pre&gt;&lt;code class="language-js"&gt;React.render(
  &amp;lt;Provider store={store}&amp;gt;
    &amp;lt;ConnectedRouter history={history}&amp;gt;
      &amp;lt;JssProvider jss={jss} generateClassName={generateClassName}&amp;gt;
        &amp;lt;MuiThemeProvider theme={theme}&amp;gt;
          &amp;lt;MuiPickersUtilsProvider utils={MomentUtils}&amp;gt;
            &amp;lt;App /&amp;gt; {/* FINALLY */}
          &amp;lt;/MuiPickersUtilsProvider&amp;gt;
        &amp;lt;/MuiThemeProvider&amp;gt;
      &amp;lt;/JssProvider&amp;gt;
    &amp;lt;/ConnectedRouter&amp;gt;
  &amp;lt;/Provider&amp;gt;
)
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;It feels like I'm in Dante's Inferno creating the 9 circles of hell. I'm being dramatic of course--this is readable and probably fine. But there are situations with nesting even worse than this. If you're interested in how to flatten this out, read on.&lt;/p&gt;
&lt;h2 id="recompose"&gt;Recompose&lt;/h2&gt;
&lt;p&gt;I like the &lt;a href="#recompose"&gt;recompose&lt;/a&gt; utility library, it adds some functional helpers to React apps. One helper that we'll leverage here is called &lt;code&gt;nest&lt;/code&gt;:&lt;/p&gt;
&lt;pre&gt;&lt;code class="language-js"&gt;import { nest } from &amp;quot;recompose&amp;quot;;

const AppProviders = nest(
  Provider,
  ConnectedRouter,
  JssProvider,
  MuiThemeProvider,
  MuiPickersUtilsProvider
);

ReactDOM.render(
  &amp;lt;AppProviders 
    store={store} 
    history={history} 
    jss={jss} 
    generateClassName={generateClassName} 
    theme={theme} 
    utils={MomentUtils}
  &amp;gt;    
    &amp;lt;App /&amp;gt; {/* That's a bit better */}
  &amp;lt;/AppProviders&amp;gt;,
  document.getElementById('root')
)
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;This actually works. What's happening here is that &lt;code&gt;nest&lt;/code&gt; will take each component you give it and nest one after the other, in order of top to bottom. What you can do then is pass props that &lt;strong&gt;get passed to each nested component&lt;/strong&gt;. This is the important bit and as it turns out will cause warnings in the console because some components have prop validation that will get angry at you if you pass them props they don't expect.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;index.js:2178 Warning: Failed prop type: The following properties are not supported: `store`, `history`, `jss`, `generateClassName`, `utils`. Please remove them.
    in MuiThemeProvider (created by nest(Provider, ConnectedRouter, JssProvider, MuiThemeProvider, MuiPickersUtilsProvider))
    in nest(Provider, ConnectedRouter, JssProvider, MuiThemeProvider, MuiPickersUtilsProvider)
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Oopsie. &lt;code&gt;nest&lt;/code&gt; does accept stateless components as arguments, though. Let's do that!&lt;/p&gt;
&lt;h2 id="nest-with-stateless-components"&gt;Nest with Stateless Components&lt;/h2&gt;
&lt;pre&gt;&lt;code class="language-js"&gt;import { nest } from &amp;quot;recompose&amp;quot;;

// Nest providers in this order (top to bottom)
const withProviders = wrap(
  ({ children }) =&amp;gt; &amp;lt;Provider store={store}&amp;gt;{children}&amp;lt;/Provider&amp;gt;,
  ({ children }) =&amp;gt; &amp;lt;ConnectedRouter history={history}&amp;gt;{children}&amp;lt;/ConnectedRouter&amp;gt;,
  ({ children }) =&amp;gt; (
    &amp;lt;JssProvider jss={jss} generateClassName={generateClassName}&amp;gt;
      {children}
    &amp;lt;/JssProvider&amp;gt;
  ),
  ({ children }) =&amp;gt; &amp;lt;MuiThemeProvider theme={theme}&amp;gt;{children}&amp;lt;/MuiThemeProvider&amp;gt;,
  ({ children }) =&amp;gt; (
    &amp;lt;MuiPickersUtilsProvider utils={MomentUtils}&amp;gt;{children}&amp;lt;/MuiPickersUtilsProvider&amp;gt;
  )
);

ReactDOM.render(
  React.createElement(withProviders(App)), 
  document.getElementById('root')
);
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Alright. This also works. Buuuuut, I mean, c'mon, this somehow seems &lt;em&gt;worse&lt;/em&gt;, right?&lt;/p&gt;
&lt;p&gt;Is there a middle-ground of readability and less duplicated code? Of course! Let's just write a little helper to take pairs of components and their props and pass that to &lt;code&gt;nest&lt;/code&gt;.&lt;/p&gt;
&lt;h2 id="nesting-with-componentprop-pairs"&gt;Nesting with Component/Prop Pairs&lt;/h2&gt;
&lt;pre&gt;&lt;code class="language-js"&gt;// Nest components in this order (top to bottom)
const AppProviders = nestPairs(
  [Provider, { store }],
  [ConnectedRouter, { history }],
  [JssProvider, { jss, generateClassName }],
  [MuiThemeProvider, { theme }],
  [MuiPickersUtilsProvider, { utils: MomentUtils }]
);

ReactDOM.render(
  &amp;lt;AppProviders&amp;gt;
    &amp;lt;App /&amp;gt;
  &amp;lt;/AppProviders&amp;gt;, 
  document.getElementById('root'));
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Hey! That looks more readable &lt;em&gt;and&lt;/em&gt; solves the prop passing issue. This is what &lt;code&gt;nestPairs&lt;/code&gt; looks like:&lt;/p&gt;
&lt;pre&gt;&lt;code class="language-js"&gt;function nestPairs(...componentPropPairs) {
  return nest.apply(
    this,
    componentPropPairs.map(([ComponentClass, props]) =&amp;gt; 
      ({ children }) =&amp;gt; 
        React.createElement(ComponentClass, { ...props, children })
    )
  );
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;And in TypeScript (what I'm using):&lt;/p&gt;
&lt;pre&gt;&lt;code class="language-typescript"&gt;function nestPairs(this: any, ...componentPropPairs: Array&amp;lt;[React.ComponentType, any]&amp;gt;) {
  return nest.apply(
    this,
    componentPropPairs.map(([ComponentClass, props]): React.StatelessComponent&amp;lt;
      any
    &amp;gt; =&amp;gt; ({ children }) =&amp;gt; React.createElement&amp;lt;any&amp;gt;(ComponentClass, { ...props, children }))
  );
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;We are taking the array pairs and mapping them to stateless components with all the blanks filled in. This keeps the input
relatively simple while still allowing custom props per component. In TypeScript, the downside is that you lose the strong
typing compared to the previous version but I'm willing to do that since in my case, this is only used in the entrypoint of
our app so it'll be real apparent if things don't work.&lt;/p&gt;
</content:encoded>
		</item>
		<item>
			<title>Handling Multiple Scalar Types in GraphQL</title>
			<link>https://kamranicus.com/posts/2018-07-02-handling-multiple-scalar-types-in-graphql</link>
			<description>&lt;p&gt;I've been using &lt;a href="https://graphql.org/"&gt;GraphQL&lt;/a&gt; for awhile now at work and I think it's pretty wonderful. I like how it has a consistent way to describe API contracts and has mechanisms to handle lots of different data fetching scenarios. Similar to other static type systems like TypeScript or Flow, in GraphQL you add type annotations to schemas for the server to enforce. If you need to describe a type as "this or that" like "string or integer", this is what's called a &lt;strong&gt;type union.&lt;/strong&gt; The GraphQL spec supports type unions for objects but &lt;a href="https://github.com/facebook/graphql/issues/215"&gt;it doesn't yet support scalar type unions&lt;/a&gt; (since 2016).&lt;/p&gt;</description>
			<guid>https://kamranicus.com/posts/2018-07-02-handling-multiple-scalar-types-in-graphql</guid>
			<pubDate>Mon, 02 Jul 2018 16:55:00 GMT</pubDate>
			<content:encoded>&lt;p&gt;I've been using &lt;a href="https://graphql.org/"&gt;GraphQL&lt;/a&gt; for awhile now at work and I think it's pretty wonderful. I like how it has a consistent way to describe API contracts and has mechanisms to handle lots of different data fetching scenarios. Similar to other static type systems like TypeScript or Flow, in GraphQL you add type annotations to schemas for the server to enforce. If you need to describe a type as &amp;quot;this or that&amp;quot; like &amp;quot;string or integer&amp;quot;, this is what's called a &lt;strong&gt;type union.&lt;/strong&gt; The GraphQL spec supports type unions for objects but &lt;a href="https://github.com/facebook/graphql/issues/215"&gt;it doesn't yet support scalar type unions&lt;/a&gt; (since 2016).&lt;/p&gt;
&lt;p&gt;This is unfortunate and since scalar type unions are not yet supported, here's an approach that works well with my preferred GraphQL server, &lt;a href="https://www.apollographql.com/"&gt;Apollo&lt;/a&gt;.&lt;/p&gt;
&lt;h2 id="describing-generic-values"&gt;Describing Generic Values&lt;/h2&gt;
&lt;p&gt;In my scenario, we have multiple typeahead search fields that fetch values and pass them through our application untouched. There are half a dozen backend APIs that handle different kinds of data to search from and we use GraphQL to provide a consistent querying experience for the UI. Specifically, the raw &lt;code&gt;value&lt;/code&gt; represented by these APIs can be literally anything--we have no idea what it could be and also, &lt;strong&gt;we don't care.&lt;/strong&gt; This is key: the UI just passes this value through and eventually it gets saved back to these APIs, so we don't touch it.&lt;/p&gt;
&lt;p&gt;The schema of this scenario looks something like:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;query search($text: String!, $start: Int!, $resourceId: String!): Options

type Options {
  total: Int!
  start: Int!
  page_size: Int!
  options: [Option]!
}

type Option {
  display_value: String!
  value: ???
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Imagine a dropdown where the &lt;code&gt;display_value&lt;/code&gt; is what's shown to the user and &lt;code&gt;value&lt;/code&gt; is the backing data of the option. The user never sees it, it gets stored in state somewhere, and eventually when the user saves it gets passed back up.&lt;/p&gt;
&lt;p&gt;Now, since we use TypeScript in the UI, I can easily describe the &lt;code&gt;value&lt;/code&gt; property like this on the client:&lt;/p&gt;
&lt;pre&gt;&lt;code class="language-typescript"&gt;interface Option {
  display_value: string;
  value: any;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;To tie this back to unions, if I had more concrete information about what values get returned by these APIs, I could be more specific using a &lt;strong&gt;type union&lt;/strong&gt;:&lt;/p&gt;
&lt;pre&gt;&lt;code class="language-typescript"&gt;interface Option {
  display_value: string;
  value: string | number | boolean;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;On the GraphQL side to describe the &lt;code&gt;Option.value&lt;/code&gt; property, what would be &lt;strong&gt;ideal&lt;/strong&gt; is to do this:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;type Option {
  display_value: String!
  value: String | Int | Boolean
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;or even:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;type Option {
  display_value: String!
  value: Any
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Unfortunately, neither of these type annotations are possible with the default GraphQL language specification. Many folks give up and just use &lt;code&gt;String&lt;/code&gt; but that actually causes bugs with our scenario (numbers get converted to strings and so on) so we need to blaze our own trail.&lt;/p&gt;
&lt;h2 id="custom-scalar-types"&gt;Custom Scalar Types&lt;/h2&gt;
&lt;p&gt;In Apollo and I assume most GraphQL implementations, &lt;a href="https://www.apollographql.com/docs/apollo-server/v2/features/scalars-enums.html"&gt;you can define your own custom scalar types&lt;/a&gt;. A scalar type is just a primitive type meaning it has no additional properties like a regular &amp;quot;object&amp;quot; would in GraphQL. One custom scalar we use often is the &lt;a href="https://github.com/taion/graphql-type-json"&gt;JSON scalar type&lt;/a&gt; for generic payloads but this doesn't work with primitive types like we need here.&lt;/p&gt;
&lt;p&gt;What we need to do is define our own custom type that can resolve our value. In my case, I need an &lt;code&gt;Any&lt;/code&gt; type that really just passes the value through. This is &lt;em&gt;frowned upon&lt;/em&gt; in the GraphQL world because everything &lt;em&gt;should&lt;/em&gt; be able to be described statically. I agree with the philosophy but I'm also pragmatic and the real world always has exceptions to these guidelines. So let's make it work.&lt;/p&gt;
&lt;p&gt;In your GraphQL schema, define your new scalar type:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;type Any

type Option {
  display_value: String!
  value: Any
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Now we've declared a new type, so we need to implement it using what's called a &lt;a href="https://www.apollographql.com/docs/apollo-server/v2/features/scalars-enums.html#graphqlscalartype"&gt;type resolver&lt;/a&gt;. The implementation for our &lt;code&gt;Any&lt;/code&gt; type is dead simple:&lt;/p&gt;
&lt;pre&gt;&lt;code class="language-js"&gt;// resolvers.js
import { GraphQLScalarType } from &amp;quot;graphql&amp;quot;;

export default {
  Query: {
    search() {
      return ...
    }
  },
  Any: new GraphQLScalarType({
    name: &amp;quot;Any&amp;quot;,
    description: &amp;quot;Literally anything&amp;quot;,
    serialize(value) {
      return value;
    },
    parseValue(value) {
      return value;
    },
    parseLiteral(ast) {
      return ast.value;
    }
  })
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;Note:&lt;/strong&gt; &lt;code&gt;ast.value&lt;/code&gt; is always a string but I haven't seen a case in consuming a GQL API where &lt;code&gt;parseLiteral&lt;/code&gt; comes into play--it may with the Introspection API. For our purposes, &lt;code&gt;serialize&lt;/code&gt; and &lt;code&gt;parseValue&lt;/code&gt; are the most important.&lt;/p&gt;
&lt;p&gt;That's it! You can now pass any value for &lt;code&gt;value&lt;/code&gt; and Apollo will happily consume or return it. For context I'm showing it next to the query resolver.&lt;/p&gt;
&lt;h2 id="custom-type-union-resolver"&gt;Custom Type Union Resolver&lt;/h2&gt;
&lt;p&gt;Great! Now, can you imagine what this would look like if we needed to support a type union? We need to implement the three methods appropriately for the union. Let's make a &lt;code&gt;StringOrInt&lt;/code&gt; type and resolver:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;type StringOrInt

type Option {
  display_value: String!
  value: StringOrInt
}
&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code class="language-js"&gt;// resolvers.js
import { GraphQLScalarType, Kind } from &amp;quot;graphql&amp;quot;;

export default {
  Query: {
    search() {
      return ...
    }
  },
  StringOrInt: new GraphQLScalarType({
    name: &amp;quot;StringOrInt&amp;quot;,
    description: &amp;quot;A String or an Int union type&amp;quot;,
    serialize(value) {
      if (typeof value !== &amp;quot;string&amp;quot; &amp;amp;&amp;amp; typeof value !== &amp;quot;number&amp;quot;) {
        throw new Error(&amp;quot;Value must be either a String or an Int&amp;quot;);
      }

      if (typeof value === &amp;quot;number&amp;quot; &amp;amp;&amp;amp; !Number.isInteger(value)) {
        throw new Error(&amp;quot;Number value must be an Int&amp;quot;);
      }

      return value;
    },
    parseValue(value) {
      if (typeof value !== &amp;quot;string&amp;quot; &amp;amp;&amp;amp; typeof value !== &amp;quot;number&amp;quot;) {
        throw new Error(&amp;quot;Value must be either a String or an Int&amp;quot;);
      }
      
      if (typeof value === &amp;quot;number&amp;quot; &amp;amp;&amp;amp; !Number.isInteger(value)) {
        throw new Error(&amp;quot;Number value must be an Int&amp;quot;);
      }

      return value;
    },
    parseLiteral(ast) {

      // Kinds: http://facebook.github.io/graphql/June2018/#sec-Type-Kinds
      // ast.value is always a string
      switch (ast.kind) {
        case Kind.INT: return parseInt(ast.value, 10);
        case Kind.STRING: return ast.value;
        default:
          throw new Error(&amp;quot;Value must be either a String or an Int&amp;quot;);
      }
    }
  })
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;This supports either a &lt;code&gt;String&lt;/code&gt; or an &lt;code&gt;Int&lt;/code&gt; scalar type union. There could be more validation cases you need to handle, I'll let you explore that. You can reference the &lt;a href="http://facebook.github.io/graphql/June2018/#sec-Type-Kinds"&gt;spec&lt;/a&gt; on what kinds of tokens there are to parse.&lt;/p&gt;
&lt;p&gt;The downside with this approach is that you'll need to define a resolver for each kind of type union but that's better than having no option at all.&lt;/p&gt;
</content:encoded>
		</item>
		<item>
			<title>That's a Wrap for NDC Minnesota</title>
			<link>https://kamranicus.com/posts/2018-05-11-ndc-minnesota-typescript-react</link>
			<description>&lt;p&gt;I gave my &lt;a href="https://ndcminnesota.com/talk/building-scalable-maintainable-apps-using-typescript-and-react/"&gt;Building Scalable, Maintainable Apps with TypeScript &amp;amp; React&lt;/a&gt; talk at NDC this last week and it was a blast. Had some really great conversations afterwards and feedback was positive, which is what any speaker can hope for.&lt;/p&gt;</description>
			<guid>https://kamranicus.com/posts/2018-05-11-ndc-minnesota-typescript-react</guid>
			<pubDate>Fri, 11 May 2018 12:45:00 GMT</pubDate>
			<content:encoded>&lt;p&gt;I gave my &lt;a href="https://ndcminnesota.com/talk/building-scalable-maintainable-apps-using-typescript-and-react/"&gt;Building Scalable, Maintainable Apps with TypeScript &amp;amp; React&lt;/a&gt; talk at NDC this last week and it was a blast. Had some really great conversations afterwards and feedback was positive, which is what any speaker can hope for.&lt;/p&gt;
&lt;iframe src="https://player.vimeo.com/video/271363697" width="640" height="360" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen&gt;&lt;/iframe&gt;
&lt;p&gt;&lt;a href="https://vimeo.com/271363697"&gt;Building Scalable, Maintainable Apps Using TypeScript and React - Kamran Ayub&lt;/a&gt; from &lt;a href="https://vimeo.com/ndcconferences"&gt;NDC Conferences&lt;/a&gt; on &lt;a href="https://vimeo.com"&gt;Vimeo&lt;/a&gt;.&lt;/p&gt;
&lt;blockquote class="twitter-tweet" data-conversation="none" data-lang="en"&gt;&lt;p lang="en" dir="ltr"&gt;Wish I could have stayed and come! Loved your talk about react/typescript.&lt;/p&gt;&amp;mdash; Phill Stewart (&amp;#64;HeWhoFreeks) &lt;a href="https://twitter.com/HeWhoFreeks/status/994710519364931584?ref_src=twsrc%5Etfw"&gt;May 10, 2018&lt;/a&gt;&lt;/blockquote&gt;
&lt;script async src="https://platform.twitter.com/widgets.js" charset="utf-8"&gt;&lt;/script&gt;
&lt;p&gt;Thanks Phill! This kind of feedback makes all the stress, planning, and nerve-wracking-ness about giving talks totally worth it. I guarantee every small bit of praise you give to a speaker, online or in-person, is very much appreciated.&lt;/p&gt;
&lt;p&gt;I'm always a little cautious before this talk since it assumes some prior knowledge of TypeScript or React but I had folks come up to me and even though they hadn't had as much experience, it sparked them to learn more--which is &lt;em&gt;also&lt;/em&gt; what any speaker can hope for. Value can be provided to any skill level I think, whether it's from &amp;quot;Should I even learn this? Will it help me?&amp;quot; to &amp;quot;I've done this for a year but I haven't seen that pattern before,&amp;quot; which was my goal.&lt;/p&gt;
&lt;p&gt;Back when I proposed my first course for Pluralsight I had pitched a TypeScript and React course but it was turned down since the curriculum has a lot of React and TypeScript courses &lt;em&gt;separately&lt;/em&gt;. I may still pitch it again because &lt;a href="https://app.pluralsight.com/library/search?q=react+typescript"&gt;there's still no one course that ties them together&lt;/a&gt; (or with Flow, for that matter). I had a good conversation with a gentleman about how there's not &lt;em&gt;that&lt;/em&gt; many resources out there on specifically patterns around TS and React, a primary motivation for this talk. There's certainly enough content for a 2-3 hour course and there's a specific course pattern called a &lt;a href="https://app.pluralsight.com/library/courses/electron-playbook/table-of-contents"&gt;playbook&lt;/a&gt; that this may fit.&lt;/p&gt;
&lt;p&gt;Another person I spoke to suggested I pitch the talk to JSMN and speaking at meetups is &lt;a href="https://kamranicus.com/posts/2018-01-01-2018-a-new-year"&gt;on my 2018 goals list&lt;/a&gt; so &lt;strong&gt;of course&lt;/strong&gt; I will do that. They also let me know about the &lt;a href="https://www.midwestgamingclassic.com/"&gt;Midwest Gaming Classic&lt;/a&gt; which would be cool to bring some &lt;a href="http://excaliburjs.com"&gt;Excalibur&lt;/a&gt; talks to or just attend in general.&lt;/p&gt;
&lt;p&gt;By the way, a friendly reminder I'll be talking about Node.js bots &lt;a href="https://www.meetup.com/Minneapolis-Azure-Cloud-Computing-Meetup/events/kdbbdpyxmbjb/"&gt;at the Minneapolis Azure meetup&lt;/a&gt; in September!&lt;/p&gt;
&lt;p&gt;There were so many other great talks I went to, I will post a follow-up soon hopefully with links to the recordings if they're out by then.&lt;/p&gt;
</content:encoded>
		</item>
		<item>
			<title>Follow-Up to .NET Rocks episode on RavenDB</title>
			<link>https://kamranicus.com/posts/2018-05-01-dotnetrocks-ravendb-podcast</link>
			<description>&lt;p&gt;At the end of April I got the opportunity to record a show with .NET celebs Carl Franklin and Richard Campbell, hosts of the &lt;a href="http://dotnetrocks.com"&gt;.NET Rocks&lt;/a&gt; podcast. It's &lt;a href="https://dotnetrocks.com/?show=1541"&gt;live now&lt;/a&gt;.&lt;/p&gt;</description>
			<guid>https://kamranicus.com/posts/2018-05-01-dotnetrocks-ravendb-podcast</guid>
			<pubDate>Tue, 01 May 2018 11:00:00 GMT</pubDate>
			<content:encoded>&lt;p&gt;At the end of April I got the opportunity to record a show with .NET celebs Carl Franklin and Richard Campbell, hosts of the &lt;a href="http://dotnetrocks.com"&gt;.NET Rocks&lt;/a&gt; podcast. It's &lt;a href="https://dotnetrocks.com/?show=1541"&gt;live now&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;I tweeted about it afterwards:&lt;/p&gt;
&lt;blockquote class="twitter-tweet" data-lang="en"&gt;&lt;p lang="en" dir="ltr"&gt;There really isn&amp;#39;t anything more surreal than being on a podcast you&amp;#39;ve listened to almost your entire career and then having to try to make sense and articulate your thoughts on said podcast. MAN, what a ride. 😆&lt;/p&gt;&amp;mdash; Kamran Ayub (&amp;#64;kamranayub) &lt;a href="https://twitter.com/kamranayub/status/989605608541376513?ref_src=twsrc%5Etfw"&gt;April 26, 2018&lt;/a&gt;&lt;/blockquote&gt;
&lt;script async src="https://platform.twitter.com/widgets.js" charset="utf-8"&gt;&lt;/script&gt;
&lt;p&gt;It was fun and surreal for sure but also nerve-wracking--it was my first podcast appearance!&lt;/p&gt;
&lt;h2 id="how-it-came-about"&gt;How it came about&lt;/h2&gt;
&lt;p&gt;A few months ago I emailed Carl and Richard about interest in doing an episode on RavenDB 4, this was right after I &lt;a href="https://kamranicus.com/posts/2018-02-08-ravendb-4-course-live"&gt;published my course&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;I asked them if they'd have any appetite for a Raven 4 episode, that I just finished a course on it, and I've been a user since the 2.5 days. I suggested they could get Ayende or someone from the team on but that I'd be open to it, too. I didn't &lt;em&gt;really&lt;/em&gt; expect to be invited, after all...&lt;/p&gt;
&lt;p&gt;After I sent it, I didn't think about it much. Then, a week ago, Richard emails back and says they'd like to do an episode with someone who's been a user, which means they invited me!&lt;/p&gt;
&lt;p&gt;At this point, I'm honestly freaking out a little. Me? On .NET Rocks? Oh yes! Oh no. Oh man.&lt;/p&gt;
&lt;p&gt;We recorded the episode a few days later and you &lt;a href="https://dotnetrocks.com/?show=1541"&gt;can listen now&lt;/a&gt;.&lt;/p&gt;
&lt;h2 id="hindsight-is-2020"&gt;Hindsight is 20/20&lt;/h2&gt;
&lt;p&gt;By far my least favorite thing about speaking in public, or really speaking in general, is the analyzing that happens inevitably afterwards. Even when you know a subject, in the moment it can be tough to bring forward everything you've learned. I'm sure it gets better with practice.&lt;/p&gt;
&lt;p&gt;But you &lt;em&gt;can&lt;/em&gt; follow-up with those things you missed. So I wanted to provide some thoughts and append to my answers on the show.&lt;/p&gt;
&lt;h2 id="raven-4-performance"&gt;Raven 4 Performance&lt;/h2&gt;
&lt;p&gt;On the show I was asked about performance and I offered that in some testing I did, I saw time to rebuild a full index go from 60 seconds in 3.5 to just only 3 seconds in Raven 4. That blew my mind.&lt;/p&gt;
&lt;p&gt;I mentioned that I was seeing similar query times but that the &amp;quot;warm up&amp;quot; time on 3.5 was much larger. Here's some query performance tests I ran:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;Query                             Raven 3.5.4     Raven 4.0.3
---                               ---             ---
Get game by name (skyrim)         0ms (126ms)     1ms (20ms)
Get game by name (mario)          2ms (716ms)     1ms    
Get game by search (search)       32ms (470ms)    1ms
Get game by genre (Array)         1ms (635ms)     1ms
Indexing 45,000 entries           60 seconds      3 seconds
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;All times are for query duration (i.e. no network latency).&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;The times in parenthesis are &amp;quot;warm up&amp;quot; (first query) times. You can see for the Raven 4 tests, there was little to zero measurable warm up time.&lt;/li&gt;
&lt;li&gt;The first test showcases response time when there's only one game.&lt;/li&gt;
&lt;li&gt;The second has multiple results&lt;/li&gt;
&lt;li&gt;The third is a &amp;quot;search&amp;quot; operation which is a Lucene search&lt;/li&gt;
&lt;li&gt;The fourth test is searching an array property for an exact match&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Other observations I saw:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Network latency locally was about 7ms in 4.0. Measured in Chrome dev tools within the Studio.&lt;/li&gt;
&lt;li&gt;Querying while another index was rebuilding in 3.5 added significant overhead to all queries above (400-700ms). It had no visible impact on Raven 4.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;So from what I can gather on a limited set of tests is that Raven 4 is indeed &lt;em&gt;very fast&lt;/em&gt;.&lt;/p&gt;
&lt;h2 id="memory-usage"&gt;Memory usage&lt;/h2&gt;
&lt;p&gt;The guys asked me a good question: what is the memory performance of Raven 4 compared to its predecessors? I didn't have any hard data but I offered the anecdote that my current VM host only has 4GB of RAM and runs the website alongside the DB. This is a poor model for redundancy but I'm penny pinching until I move to .NET Core on Linux. Anyway, Raven 3.5 runs okay on low-end hardware and I expected Raven 4 to be even better.&lt;/p&gt;
&lt;p&gt;After the show I just did some simple checks. Turns out, Raven 4 &lt;strong&gt;is&lt;/strong&gt; better.&lt;/p&gt;
&lt;p&gt;The following numbers are sitting idle after having done several queries and tests mentioned above. Both have just have a dev version of my [Keep Track of My Games][http://ktomg.com] database running:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;Raven Version      Commit       Working Set
3.5.4              1.035GB      90MB
4.0.3              607MB        260MB
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;So at a glance it looks like Raven 4 is better at managing physical memory (Commit) than 3.5.4 is. To do that it looks like it has a higher working set. Even totaled, 4.0 still allocates 22% less. For someone like me who wants to make the most out of a small cloud VM, this is good.&lt;/p&gt;
&lt;h2 id="on-raven-vs.mongo"&gt;On Raven vs. Mongo&lt;/h2&gt;
&lt;p&gt;I prepped for the show and in doing so I tried to study up on Mongo a bit. Like I said in the show, I'm definitely not an expert in it nor do I use it extensively. I've written some queries against it, modified documents, and that's about it!&lt;/p&gt;
&lt;p&gt;It's easy for this question to turn into a war, people have strong opinions. I haven't had an opportunity to use Mongo much in practice. We use it for our app at work; it's used for some configuration, user sessions, and preferences. It works really well. I don't even think we have any indexes, it was designed before I joined the team.&lt;/p&gt;
&lt;p&gt;Since I came from a .NET background, I tried Raven first and it met my needs. Raven 4 really has been impressing me as I use it more. When choosing between technologies I find it's best to just try each technology to see if it fits your use case. Ask yourself what you value most and measure that when testing.&lt;/p&gt;
&lt;h2 id="challenges-moving-to-a-document-database"&gt;Challenges moving to a document database&lt;/h2&gt;
&lt;p&gt;On the show I talked about a couple challenges people might have when moving from a relational to document-based database--document modeling and indexes. Those are both real challenges but I was wracking my brain to think of more.&lt;/p&gt;
&lt;p&gt;After the recording I immediately realized there was a lot more to this I should have mentioned (dumb brain!). I think one thing I struggled with a lot when starting out with Raven was just patterns and practices. How do I do this one thing I used to do with EF?&lt;/p&gt;
&lt;p&gt;One example I go over in &lt;a href="https://kamranicus.com/posts/2018-02-08-ravendb-4-course-live"&gt;my course&lt;/a&gt; is unique constraints. In EF, you'd just issue a query asking if an entity with a property equal to some value exists:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;context.DbSet&amp;lt;User&amp;gt;().Any(u =&amp;gt; u.Username == &amp;quot;kamranicus&amp;quot;)
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Great, all set. When I moved to Raven, I didn't understand the total implications at first about indexing and eventual consistency. This type of query in Raven &lt;strong&gt;is&lt;/strong&gt; possible, like this:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;session.Query&amp;lt;User&amp;gt;(x =&amp;gt; x.WaitForNonStaleResults())
  .Any(u =&amp;gt; u.Username == &amp;quot;kamranicus&amp;quot;)
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;The problem is that from the beginning the guidance is to avoid &lt;code&gt;WaitForNonStaleResults()&lt;/code&gt; at all costs since it has performance implications (see my course, I explain it). Well, if you &lt;em&gt;don't&lt;/em&gt; do it, then your query isn't guaranteed to bring back up-to-date results (i.e. eventually consistent) and you will not get the result you expect.&lt;/p&gt;
&lt;p&gt;Instead, you have to lean on the fact that document operations are ACID-compliant and hack your brain to think of unique constraints as &lt;em&gt;actual documents.&lt;/em&gt; This is what the &lt;a href="https://ravendb.net/docs/article-page/3.5/Csharp/server/bundles/unique-constraints"&gt;unique constraints bundle&lt;/a&gt; was for in Raven 3.5 and below. Now in Raven 4, you'd use an &lt;a href="https://ayende.com/blog/180067/ravendb-4-0-interlocked-distributed-operations"&gt;interlocked distributed operation&lt;/a&gt;, which I've yet to try in practice.&lt;/p&gt;
&lt;p&gt;I'm hoping to address more of these patterns/practices in a follow-up course.&lt;/p&gt;
&lt;h2 id="enjoy-the-show"&gt;Enjoy the show&lt;/h2&gt;
&lt;p&gt;Like I said in that tweet, it was completely surreal to be on the show. I'm still in shock I think and I'm not sure what to expect for response. If you listened, hopefully you learned something new. By next winter, I'll get that snow blower.&lt;/p&gt;
</content:encoded>
		</item>
		<item>
			<title>Frontend Masters: Advanced React Patterns Workshop</title>
			<link>https://kamranicus.com/posts/2018-04-29-advanced-react-patterns-workshop</link>
			<description>&lt;p&gt;A couple weeks ago I went to the in-person Frontend Masters workshop with Kent C. Dodds on Advanced React Patterns.&lt;/p&gt;</description>
			<guid>https://kamranicus.com/posts/2018-04-29-advanced-react-patterns-workshop</guid>
			<pubDate>Mon, 30 Apr 2018 01:18:00 GMT</pubDate>
			<content:encoded>&lt;p&gt;A couple weeks ago I went to the in-person Frontend Masters workshop with Kent C. Dodds on Advanced React Patterns.&lt;/p&gt;
&lt;p&gt;I was looking forward to it, I've followed Kent for awhile and knew his workshops were well-received. I'm doing React at work and it was perfect timing for our project.&lt;/p&gt;
&lt;h2 id="takeaways"&gt;Takeaways&lt;/h2&gt;
&lt;p&gt;The gist of the workshop was state management and props passing patterns in React, to be able to build smarter, flexible components.&lt;/p&gt;
&lt;p&gt;We centered around a toggle component that showcased each of the patterns, some isolated and some working in tandem.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Context API&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;I hadn't really been exposed to the context API before React 16.3 so this was brand new to me. They really have made it much easier to use now.&lt;/p&gt;
&lt;p&gt;The Context API makes it straightforward to pass data around throughout your app without forcing you to pass props down through the component tree (called &amp;quot;props drilling&amp;quot;).&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Render Props&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;This pattern has come into fashion pretty recently I'd say. When I started learning React over a year ago I hadn't seen this pattern used much. Before attending the workshop I had used this pattern in practice in KTOMG to build analytics/social sharing providers that encapsulated some behavior like respecting Do Not Track across the site.&lt;/p&gt;
&lt;p&gt;The pattern is useful for building flexible UI components where you can encapsulate behavior and state but delegate rendering (or parts of rendering) to the consumer.&lt;/p&gt;
&lt;p&gt;Render props is powerful and in a lot of cases provides most of what you'd need in a flexible component.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Control Props&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;This is a pattern to delegate the setting of state to &amp;quot;control props.&amp;quot; This provides flexibility to a component to delegate control of its state to a consuming component vs. setting internal state only.&lt;/p&gt;
&lt;p&gt;Whenever the component is intending to use &lt;code&gt;setState&lt;/code&gt;, it checks whether that state is &lt;em&gt;controlled&lt;/em&gt; (meaning, it's being passed in as a prop). If it is, it just calls a callback with what &lt;em&gt;would&lt;/em&gt; be the new state value. If it's not controlled, it goes ahead and sets state normally.&lt;/p&gt;
&lt;p&gt;This is useful in situations where you as the caller want to control the state yourself--it means though that you basically have to know how the internal state works of the component you're controlling.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;State Reducer&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;This is a more advanced pattern Kent showed. The goal of this is to enable a consuming component to manipulate the internal state of a component by basically intercepting state changes.&lt;/p&gt;
&lt;p&gt;It's a more flexible version of control props basically allowing your entire state to be controlled by a consumer.&lt;/p&gt;
&lt;p&gt;There's an &lt;a href="https://github.com/kentcdodds/advanced-react-patterns-v2/blob/master/src/why/state-reducer.js"&gt;example in the workshop repo&lt;/a&gt;.&lt;/p&gt;
&lt;h2 id="rendux-exercise"&gt;Rendux Exercise&lt;/h2&gt;
&lt;p&gt;I missed the last couple exercises going over Higher Order Components (HOCs) and this last exercise called &lt;a href="https://github.com/kentcdodds/advanced-react-patterns-v2/blob/master/src/exercises-final/13.js"&gt;Rendux&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;The Rendux exercise uses the render props pattern to hook into a Redux store as a reusable component. Any time you need to access the store, you can use the &lt;code&gt;Rendux.Consumer&lt;/code&gt; component or &lt;code&gt;withRendux&lt;/code&gt; enhancer function. This is a different way to accomplish the similar Redux experience of using &lt;code&gt;Provider&lt;/code&gt; and the &lt;code&gt;connect&lt;/code&gt; enhancer.&lt;/p&gt;
&lt;h2 id="putting-into-practice"&gt;Putting into practice&lt;/h2&gt;
&lt;p&gt;The goal of the workshop was to learn each of these patterns on a small scale so we can apply them to our larger projects. There is certainly already opportunities on my project at work to leverage what I learned--I'm hoping to spend some more time building out our project and then writing about some useful patterns.&lt;/p&gt;
</content:encoded>
		</item>
		<item>
			<title>Finished My First Workshop at MinneWebCon</title>
			<link>https://kamranicus.com/posts/2018-04-29-azure-nodejs-workshop-minnewebcon</link>
			<description>&lt;p&gt;Last week I had the opportunity to &lt;a href="https://kamranicus.com/posts/2017-12-18-workshop-bots-javascript-node-minnewebcon"&gt;give a half-day workshop&lt;/a&gt; at MinneWebCon. I had initially submitted the session as a 50 minute talk but the committee thought it would be better as a workshop.&lt;/p&gt;</description>
			<guid>https://kamranicus.com/posts/2018-04-29-azure-nodejs-workshop-minnewebcon</guid>
			<pubDate>Mon, 30 Apr 2018 00:56:00 GMT</pubDate>
			<content:encoded>&lt;p&gt;Last week I had the opportunity to &lt;a href="https://kamranicus.com/posts/2017-12-18-workshop-bots-javascript-node-minnewebcon"&gt;give a half-day workshop&lt;/a&gt; at MinneWebCon. I had initially submitted the session as a 50 minute talk but the committee thought it would be better as a workshop.&lt;/p&gt;
&lt;p&gt;The workshop outline and code is &lt;a href="https://github.com/kamranayub/workshop-nodejs-azure-bots"&gt;available on GitHub&lt;/a&gt;. I thought I'd write up a brief retrospective since it was my first workshop!&lt;/p&gt;
&lt;h2 id="what-went-well"&gt;What went well&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Everyone was able to deploy a live bot and finished the workshop (huzzah!)&lt;/li&gt;
&lt;li&gt;I was able to help answer some questions I hadn't anticipated&lt;/li&gt;
&lt;li&gt;People paired up if they didn't have everything they needed on their computers&lt;/li&gt;
&lt;li&gt;Azure Bot Service works pretty well and even when a couple people accidentally chose the wrong code template, they were able to redo the bot in a few minutes&lt;/li&gt;
&lt;li&gt;People said they liked it, which always feels good!&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="what-could-change"&gt;What could change&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;If it was a longer workshop, I'd rather build a custom sample bot rather than building off the pre-built Notes domain&lt;/li&gt;
&lt;li&gt;I walked through some of the LUIS grammar via whiteboard but it would have been better to visualize the relationships better in slide form I think&lt;/li&gt;
&lt;li&gt;At the end some folks wanted to see what a &amp;quot;real&amp;quot; bot looks like hooked up to real data. I showed what I did for &lt;a href="http://ktomg.com"&gt;KTOMG&lt;/a&gt; but ideally in a full workshop we'd use a live data source as you would in the real world.&lt;/li&gt;
&lt;li&gt;The Azure Bot Service &amp;quot;web chat&amp;quot; blade was super finicky--it usually required people to sign out fully and sign back in to boot up the interface&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="what-i-learned"&gt;What I learned&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;I learned I enjoy giving workshops. Helping people accomplish something in a hands-on way is pretty cool.&lt;/li&gt;
&lt;li&gt;Different people are on different levels and want different things out of the workshop. It was good I had some stretch goals.&lt;/li&gt;
&lt;li&gt;Professionals want a way to see how what they learned will apply to their day-to-day work. I'd flesh this out more if I gave the workshop again. Showing how I wrote my bot in C# for &lt;a href="http://ktomg.com"&gt;KTOMG&lt;/a&gt; was helpful I think.&lt;/li&gt;
&lt;/ul&gt;
</content:encoded>
		</item>
		<item>
			<title>Ludum Dare 41 Post-Mortem</title>
			<link>https://kamranicus.com/posts/2018-04-29-ludum-dare-41-post-mortem</link>
			<description>&lt;p&gt;Whoo! Another year, another opportunity to participate in Ludum Dare with the &lt;a href="http://excaliburjs.com"&gt;Excalibur.js&lt;/a&gt; team. Last jam we made &lt;a href="https://blog.excaliburjs.com/post/161334104662/ludum-dare-38-postmortem"&gt;I Just Wanted Groceries&lt;/a&gt; (which I totally spaced on writing about). You can play our LD41 game &lt;a href="http://excaliburjs.com/ludum-41"&gt;Office Daydream&lt;/a&gt; right now.&lt;/p&gt;</description>
			<guid>https://kamranicus.com/posts/2018-04-29-ludum-dare-41-post-mortem</guid>
			<pubDate>Sun, 29 Apr 2018 13:00:00 GMT</pubDate>
			<content:encoded>&lt;p&gt;Whoo! Another year, another opportunity to participate in Ludum Dare with the &lt;a href="http://excaliburjs.com"&gt;Excalibur.js&lt;/a&gt; team. Last jam we made &lt;a href="https://blog.excaliburjs.com/post/161334104662/ludum-dare-38-postmortem"&gt;I Just Wanted Groceries&lt;/a&gt; (which I totally spaced on writing about). You can play our LD41 game &lt;a href="http://excaliburjs.com/ludum-41"&gt;Office Daydream&lt;/a&gt; right now.&lt;/p&gt;
&lt;h2 id="the-jam"&gt;The jam&lt;/h2&gt;
&lt;p&gt;&lt;a href="http://ldjam.com"&gt;Ludum Dare&lt;/a&gt; is a global game jam that has two modes: the Compo and the Jam. The Compo is for individuals and strict rules on content creation, limited to 48 hours. The Jam is for teams and is a bit looser on content rules (you can use premade assets) and lasts 72 hours. Since we are a team, we always do the jam but it's always interested me to try doing a Compo by myself at some point.&lt;/p&gt;
&lt;h2 id="the-theme"&gt;The theme&lt;/h2&gt;
&lt;p&gt;The theme this jam was not as great as we hoped--there were certainly some better ones in the running but it was a challenge and we made the most of it. The theme was &amp;quot;Combine 2 incompatible genres.&amp;quot;&lt;/p&gt;
&lt;p&gt;First, we didn't like the term &amp;quot;incompatible&amp;quot; because that already presupposes the two genres you choose can't have been considered compatible today and that they would never be compatible in the future. But that's nonsense because I'd DEFINITELY play &lt;a href="https://ldjam.com/events/ludum-dare/41/jeff-from-accounting"&gt;this typing FPS&lt;/a&gt; for realsies if it ever made it into a production game.&lt;/p&gt;
&lt;p&gt;Second, we like open-ended themes more than specifically scoped themes. For example, previous ones we participated in included &amp;quot;Under the Sea&amp;quot;, &amp;quot;A Small World&amp;quot;, and &amp;quot;Shapeshift.&amp;quot; These all leave much more open interpretations.&lt;/p&gt;
&lt;p&gt;Still. The theme forced people to come up with some interesting combinations like this basketball + Connect 4 game. Constraints breed creativity, even if there were some really effing weird ones.&lt;/p&gt;
&lt;h2 id="brainstorming"&gt;Brainstorming&lt;/h2&gt;
&lt;p&gt;We played with a lot of combinations. We started by listing game genres, then movie genres, then music genres. Some we combos we liked but knew we didn't have time for, mainly RPG-based or turn-based.&lt;/p&gt;
&lt;p&gt;It kept coming back to a runner + idle game theme. The dichotomies of a fast-paced runner with a casual idle game was attractive. They were incompatible in terms of mechanics and style. We didn't want to &amp;quot;mix&amp;quot; two genres, we really wanted to have a distinct separation between the genres.&lt;/p&gt;
&lt;p&gt;We landed on either a librarian dreaming of things she read in the books she was putting away or a bored office worker. The office theme was strong and we didn't have enough time to build out a full themed set of art for different book genres.&lt;/p&gt;
&lt;p&gt;And so, Office Daydream was born. You were just a person doing menial office tasks dreaming of being a motorcycle stunt action hero.&lt;/p&gt;
&lt;h2 id="coding"&gt;Coding&lt;/h2&gt;
&lt;p&gt;This jam was different from previous jams because we were at our teammate's cabin and were essentially on vacation. My wife and son were there, other spouses were present. We knew we'd only be working 8 hour days to spend evenings with family.&lt;/p&gt;
&lt;p&gt;This turned out to work super well--and even when I had to leave halfway through on Sunday, the team managed to get everything done that we had scoped for. We ended up starting around 8-9am, taking an hour lunch break, and finishing around 5pm.&lt;/p&gt;
&lt;p&gt;Some things we did ahead of time that ensured we met this schedule:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Spend Friday after theme announcement &lt;em&gt;just&lt;/em&gt; focusing on design and mechanics and idea generation to have a solid goal by the end of the night&lt;/li&gt;
&lt;li&gt;Scoped all mechanics/design to a minimal goal (MVP) with stretch goals&lt;/li&gt;
&lt;li&gt;Had all our tooling/setup in place beforehand so we could sit down and work immediately&lt;/li&gt;
&lt;li&gt;Used Trello like we have in the past to manage work&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="design"&gt;Design&lt;/h2&gt;
&lt;p&gt;We initially had thought you'd control the runner via keyboard and the office minigames with your mouse. But then we decided to use the mouse for all interaction because it forced you to focus on one thing at a time, making it harder.&lt;/p&gt;
&lt;p&gt;We also didn't really know what we'd do for an &amp;quot;endgame&amp;quot; until we realized the theme decided for us. You're in an office. You typically work an 8 hour day. So, each minigame will last essentially a portion of that time and when you finish them, you end your work day successfully daydreaming.&lt;/p&gt;
&lt;h2 id="assets"&gt;Assets&lt;/h2&gt;
&lt;p&gt;I spent a little time and made the background for the runner portion. I went with a cyberpunk-ish/Bladerunner cityscape theme. It worked pretty well! Just simple fixed width skyscrapers that could be randomly tiled horizontally to make the background more dynamic.&lt;/p&gt;
&lt;p&gt;I also found the motorcycle asset and designed the art for the paper collation minigame (the mug I did was replaced by Erik's better mug). I'm no artist and I'm very glad Erik took care of the rest of the art. If we need anyone else on the team, it's a dedicated artist.&lt;/p&gt;
&lt;h2 id="the-end"&gt;The end&lt;/h2&gt;
&lt;p&gt;Every game jam is a ton of fun and I always learn something new about game dev. It was nice not feeling the &amp;quot;crunch&amp;quot; of 12 hour days, I feel we might adopt the 8 hour cycle in future jams more often now that we know we can accomplish what we set out to build.&lt;/p&gt;
</content:encoded>
		</item>
		<item>
			<title>Elusive Bugs with GraphQL Object Caching in Apollo Client</title>
			<link>https://kamranicus.com/posts/2018-03-06-graphql-apollo-object-caching</link>
			<description>&lt;p&gt;We are deploying a major update to our internal application soon that uses the &lt;a href="https://www.apollographql.com/docs/react/index.html"&gt;Apollo client&lt;/a&gt; for GraphQL. It's pretty awesome even though there were &lt;a href="https://github.com/apollographql/apollo-client/pull/3102"&gt;a couple bugs&lt;/a&gt; I had to fix.&lt;/p&gt;</description>
			<guid>https://kamranicus.com/posts/2018-03-06-graphql-apollo-object-caching</guid>
			<pubDate>Wed, 07 Mar 2018 14:21:00 GMT</pubDate>
			<content:encoded>&lt;p&gt;We are deploying a major update to our internal application soon that uses the &lt;a href="https://www.apollographql.com/docs/react/index.html"&gt;Apollo client&lt;/a&gt; for GraphQL. It's pretty awesome even though there were &lt;a href="https://github.com/apollographql/apollo-client/pull/3102"&gt;a couple bugs&lt;/a&gt; I had to fix.&lt;/p&gt;
&lt;p&gt;During regression testing we ran into an issue involving the Apollo client that was subtle and caused &amp;quot;interesting&amp;quot; bugs. First, let's take a look at exactly how object caching works.&lt;/p&gt;
&lt;h2 id="caching-in-apollo-client"&gt;Caching in Apollo client&lt;/h2&gt;
&lt;p&gt;By default, caching in Apollo uses the &lt;a href="https://www.apollographql.com/docs/react/basics/caching.html"&gt;in-memory cache&lt;/a&gt;. The way Apollo determines if it should cache a GraphQL object is if the response contains an &lt;code&gt;id&lt;/code&gt; or &lt;code&gt;_id&lt;/code&gt; property &lt;em&gt;and&lt;/em&gt; a &lt;code&gt;__typename&lt;/code&gt; property (which is added automatically by Apollo by default).&lt;/p&gt;
&lt;p&gt;So, for example, let's say we declared a &lt;code&gt;Product&lt;/code&gt; type in our GraphQL schema:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;type Product {
  sku: ID!
  title: String!
  quantity: Int!
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;The product has an identifier and it's stored in the SKU field.&lt;/p&gt;
&lt;p&gt;Then you issued a query like this:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;{
  product(sku: &amp;quot;abc123&amp;quot;) {
    sku
    title
    quantity
  }
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Pretty straightforward--we want to grab the &lt;code&gt;sku&lt;/code&gt;, &lt;code&gt;title&lt;/code&gt;, and &lt;code&gt;quantity&lt;/code&gt; for a product by SKU. The response when run through Apollo client will look like:&lt;/p&gt;
&lt;pre&gt;&lt;code class="language-js"&gt;{
  data: {
    product: {
      sku: &amp;quot;abc123&amp;quot;,
      title: &amp;quot;My cool product&amp;quot;,
      quantity: 4,
      __typename: &amp;quot;Product&amp;quot;
    }
  }
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Now, based on the rules above, do you think Apollo will cache the Product object by it's SKU? &lt;strong&gt;No.&lt;/strong&gt; Because there is no &lt;code&gt;id&lt;/code&gt; or &lt;code&gt;_id&lt;/code&gt; property, only a &lt;code&gt;__typename&lt;/code&gt; property which isn't enough.&lt;/p&gt;
&lt;p&gt;We can fix this in a few ways:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Change the schema&lt;/li&gt;
&lt;li&gt;Use &lt;code&gt;dataIdFromObject&lt;/code&gt; option in the &lt;a href="https://www.apollographql.com/docs/react/basics/caching.html#configuration"&gt;caching configuration&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Alias the SKU to be &lt;code&gt;id&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Alias SKU as &lt;code&gt;_id&lt;/code&gt; but still keep &lt;code&gt;sku&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;I don't like the first option because if &lt;code&gt;sku&lt;/code&gt; is the natural key in your domain, why change it?&lt;/p&gt;
&lt;p&gt;Using &lt;code&gt;dataIdFromObject&lt;/code&gt; is a great approach if you control the client configuration:&lt;/p&gt;
&lt;pre&gt;&lt;code class="language-js"&gt;import { InMemoryCache, defaultDataIdFromObject } from 'apollo-cache-inmemory';

const cache = new InMemoryCache({
  dataIdFromObject: object =&amp;gt; {
    switch (object.__typename) {
      case 'Product': return object.sku; // use `sku` as the primary key
      default: return defaultDataIdFromObject(object); // fall back to default handling
    }
  }
});
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;I'd advise splitting this up into separate functions for each type and genericizing it but I leave that up to you.&lt;/p&gt;
&lt;p&gt;If you don't control the configuration, adding an alias still allow you to express what the natural ID is of your domain objects and pushes the concern of ID caching to the client.&lt;/p&gt;
&lt;p&gt;I prefer adding an additional &lt;code&gt;_id&lt;/code&gt; field because it allows our caller to still treat the response as it would be expected from the GraphQL documentation. It also helps more if you're statically typing responses. With that in mind, let's update our query:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;{
  product(sku: &amp;quot;abc123&amp;quot;) {
    sku
    title
    quantity
    _id: sku
  }
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Great! We've added an alias for &lt;code&gt;_id&lt;/code&gt; so now GraphQL will respond with:&lt;/p&gt;
&lt;pre&gt;&lt;code class="language-js"&gt;{
  data: {
    product: {
      sku: &amp;quot;abc123&amp;quot;,
      title: &amp;quot;My cool product&amp;quot;,
      quantity: 4,
      _id: &amp;quot;abc123&amp;quot;,
      __typename: &amp;quot;Product&amp;quot;
    }
  }
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Now the condition is satisfied and Apollo will cache the &lt;code&gt;Product&lt;/code&gt; by this ID.&lt;/p&gt;
&lt;h2 id="non-idempotent-object-caching"&gt;Non-idempotent object caching&lt;/h2&gt;
&lt;p&gt;Using IDs is pretty standard when working with APIs and data. Real scenarios have more complex data and thus your GraphQL schema will probably start to get more involved. Since many entities in an application domain might have &lt;code&gt;id&lt;/code&gt; properties this feature of Apollo can also turn against you if you aren't careful.&lt;/p&gt;
&lt;p&gt;For example, let's say a product can come in multiple colors. On a per-product basis, you can mark a color as the primary color--meaning for example by default when shown on your website, you present that color first. But the names of colors are static and are on a per-color basis.&lt;/p&gt;
&lt;p&gt;The schema looks like:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;type Color {
  id: Int!
  name: String!
  is_primary: Boolean!
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;The GraphQL query will look something like this if you're working with a standard &lt;code&gt;id&lt;/code&gt; convention:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;{
  product(sku: &amp;quot;abc123&amp;quot;) {
    _id: sku
    sku
    title
    quantity
    colors {
      id
      is_primary
      name
    }    
  }
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Again this is pretty straightforward and nothing looks wrong on the surface. But it hides a subtle and nasty issue. When Apollo sends this query and the server will respond like this:&lt;/p&gt;
&lt;pre&gt;&lt;code class="language-js"&gt;{
  data: {
    product: {
      sku: &amp;quot;abc123&amp;quot;,
      title: &amp;quot;My cool product&amp;quot;,
      quantity: 4,
      colors: [
        { id: 1, name: &amp;quot;Red&amp;quot;, is_primary: true, __typename: &amp;quot;Color&amp;quot; },
        { id: 2, name: &amp;quot;Blue&amp;quot;, is_primary: false, __typename: &amp;quot;Color&amp;quot; }
      ],
      _id: &amp;quot;abc123&amp;quot;,
      __typename: &amp;quot;Product&amp;quot;
    }
  }
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Now think about the conditions in which Apollo will cache a &lt;code&gt;Color&lt;/code&gt; object. Do you see the problem? Let me showcase the problem by issuing multiple product queries that select primary colors:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;{
  products(skus: [&amp;quot;abc123&amp;quot;, &amp;quot;xyz890&amp;quot;]) {
    _id: sku
    sku
    title
    quantity
    colors {
      id
      is_primary
      name
    }    
  }
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Now the raw GraphQL response looks like this for multiple products:&lt;/p&gt;
&lt;pre&gt;&lt;code class="language-js"&gt;{
  data: {
    products: [
      {
        sku: &amp;quot;abc123&amp;quot;,
        title: &amp;quot;My cool product&amp;quot;,
        quantity: 4,
        colors: [
          { id: 1, name: &amp;quot;Red&amp;quot;, is_primary: true, __typename: &amp;quot;Color&amp;quot; },
          { id: 2, name: &amp;quot;Blue&amp;quot;, is_primary: false, __typename: &amp;quot;Color&amp;quot; }
        ],
        _id: &amp;quot;abc123&amp;quot;,
        __typename: &amp;quot;Product&amp;quot;
      },
      {
        sku: &amp;quot;xyz890&amp;quot;,
        title: &amp;quot;Another cool product&amp;quot;,
        quantity: 0,
        colors: [
          { id: 1, name: &amp;quot;Red&amp;quot;, is_primary: false, __typename: &amp;quot;Color&amp;quot; },
          { id: 3, name: &amp;quot;Yellow&amp;quot;, is_primary: true, __typename: &amp;quot;Color&amp;quot; }
        ],
        _id: &amp;quot;xyz890&amp;quot;,
        __typename: &amp;quot;Product&amp;quot;
      }
    ]
  }
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;But when Apollo processes these query results, it tries to be smart and efficient by attempting to read objects from the cache. Guess what will happen as it processes this?&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Process &lt;code&gt;products[0]&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Cache product by ID &lt;code&gt;abc123&lt;/code&gt; for type &lt;code&gt;Product&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Process &lt;code&gt;products[0].colors[0]&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Cache color Red by ID &lt;code&gt;1&lt;/code&gt; for type &lt;code&gt;Color&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;At step 4, we've cached the Red color by its ID, which means when Apollo moves to the next product...&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Process &lt;code&gt;products[1].colors[0]&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Does color Red &lt;code&gt;1&lt;/code&gt; already exist in the cache? &lt;strong&gt;YES.&lt;/strong&gt; Reuse that object.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Let's look at the &lt;strong&gt;actual&lt;/strong&gt; response Apollo gives us for this same query:&lt;/p&gt;
&lt;p&gt;&lt;img src="https://user-images.githubusercontent.com/563819/37100190-f26e8792-21e7-11e8-9d8b-35c14db7eeca.png" class="img-fluid" alt="object-caching" /&gt;&lt;/p&gt;
&lt;p&gt;See &lt;a href="https://codesandbox.io/s/24zx7k6z10"&gt;for yourself!&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Apollo &amp;quot;smartly&amp;quot; reuses the same object response for Red as before--which means when we read the Apollo query result, &lt;strong&gt;the second product ends up having no primary color.&lt;/strong&gt; OOPS.&lt;/p&gt;
&lt;h2 id="the-root-cause"&gt;The root cause&lt;/h2&gt;
&lt;p&gt;While this may seem like a bug, it's not really--it's just showcasing an issue with the way we are expressing our GraphQL types incorrectly. Apollo is making the assumption that an entity is idempotent across queries with the same ID. In our case, that's not true because different products may have different &lt;code&gt;is_primary&lt;/code&gt; values for the same color. Ideally, what we should be doing is putting all &lt;em&gt;product-specific&lt;/em&gt; information on the &lt;code&gt;Product&lt;/code&gt; type, not a nested type.&lt;/p&gt;
&lt;h2 id="workaround-or-fix-it"&gt;Workaround or fix it?&lt;/h2&gt;
&lt;p&gt;The right way to fix this is by changing our schema to add a new &lt;code&gt;primary_color&lt;/code&gt; field to the &lt;code&gt;Product&lt;/code&gt; type:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;type Product {
  sku: ID!
  title: String!
  quantity: Int!
  colors: [Color]!
  primary_color: Color
}

type Color {
  id: Int!
  name: String!
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Now for any number of products, &lt;code&gt;Color&lt;/code&gt; can be safely cached no matter where it appears in a response.&lt;/p&gt;
&lt;p&gt;In some cases, like ours, doing the right thing is a large enough change that we can't do it right away without modifying a lot of client code (we could migrate slowly, by adding the new field and deprecating the old field). It's also just possible in a big company, you may not control the schema and have to wait for a fix from another team. There are some other workarounds you as a client can do.&lt;/p&gt;
&lt;h3 id="alias-the-id-as-something-else"&gt;Alias the ID as something else&lt;/h3&gt;
&lt;p&gt;The first workaround is to simply just use a different field name instead of &lt;code&gt;id&lt;/code&gt;:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;{
  products(skus: [&amp;quot;abc123&amp;quot;, &amp;quot;xyz890&amp;quot;) {
    _id: sku
    sku
    title
    quantity
    colors {
      color_id: id
      is_primary
      name
    }    
  }
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Apollo's caching condition won't trigger for the &lt;code&gt;Color&lt;/code&gt; objects now (no &lt;code&gt;id&lt;/code&gt; or &lt;code&gt;_id&lt;/code&gt; fields) and we're safe.&lt;/p&gt;
&lt;p&gt;This might seem like a good approach but the downside is that it would be easy for a future developer to mistakenly use &lt;code&gt;id&lt;/code&gt; in another query and not realize the mistake they're making.&lt;/p&gt;
&lt;h3 id="exclude-the_typename-field"&gt;Exclude the &lt;code&gt;__typename&lt;/code&gt; field&lt;/h3&gt;
&lt;p&gt;It might be better to just &lt;em&gt;explicitly&lt;/em&gt; exclude the &lt;code&gt;__typename&lt;/code&gt; field that Apollo adds by default. It turns out this is pretty easy and makes it very apparent we are doing something &amp;quot;weird&amp;quot; that should cause future developers to stop and ask why:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;{
  products(skus: [&amp;quot;abc123&amp;quot;, &amp;quot;xyz890&amp;quot;]) {
    _id: sku
    sku
    title
    quantity
    colors {
      color_id: id
      is_primary
      name
      # Disable Apollo caching for this Color
      __typename &amp;#64;skip(if: true)
    }    
  }
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Using the &lt;code&gt;&amp;#64;skip&lt;/code&gt; GraphQL directive, we can explictly denote we don't want to cache the response for this particular query result for &lt;code&gt;Color&lt;/code&gt;. We can even call it out with a comment to make it extra apparent.&lt;/p&gt;
&lt;h3 id="dont-add_typename-wholesale"&gt;Don't add &lt;code&gt;__typename&lt;/code&gt; wholesale&lt;/h3&gt;
&lt;p&gt;If you control your Apollo client caching, there is an option to &lt;a href="https://www.apollographql.com/docs/react/basics/caching.html#configuration"&gt;disable automatic addition&lt;/a&gt; of &lt;code&gt;__typename&lt;/code&gt; to queries for the in-memory caching using the &lt;code&gt;addTypename: false&lt;/code&gt; option.&lt;/p&gt;
&lt;p&gt;If you wanted to disable caching wholesale, it's probably better to just use the &lt;code&gt;no-cache&lt;/code&gt; fetch policy which bypasses any calls to the underlying data store (which can be expensive for very large query batches/responses).&lt;/p&gt;
&lt;h2 id="caching-is-awesome-except-when-its-not"&gt;Caching is awesome except when its not&lt;/h2&gt;
&lt;p&gt;This &amp;quot;bug&amp;quot; took us awhile to figure out--but I remember reading the docs for Apollo caching and after I tested aliasing the fields, everything was suddenly working as expected, that's when it clicked more and I understood what was happening. I love GraphQL and the Apollo client is pretty awesome but issues like these can be frustrating! I hope this breakdown helps other GQL developers model their schema appropriately.&lt;/p&gt;
&lt;p&gt;The reference code is available on:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Apollo Launchpad: &lt;a href="https://launchpad.graphql.com/kqx178pn57"&gt;https://launchpad.graphql.com/kqx178pn57&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Codesandbox: &lt;a href="https://codesandbox.io/s/24zx7k6z10"&gt;https://codesandbox.io/s/24zx7k6z10&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content:encoded>
		</item>
		<item>
			<title>RavenDB 4: Getting Started course is live!</title>
			<link>https://kamranicus.com/posts/2018-02-08-ravendb-4-course-live</link>
			<description>&lt;p&gt;It's here! &lt;a href="http://bit.ly/learnravendb4"&gt;Go and watch my new Pluralsight course&lt;/a&gt; now to learn about working with RavenDB 4! RavenDB is available for free, &lt;a href="https://ravendb.net/download"&gt;even for production use&lt;/a&gt;.&lt;/p&gt;</description>
			<guid>https://kamranicus.com/posts/2018-02-08-ravendb-4-course-live</guid>
			<pubDate>Fri, 09 Feb 2018 01:04:00 GMT</pubDate>
			<content:encoded>&lt;p&gt;It's here! &lt;a href="http://bit.ly/learnravendb4"&gt;Go and watch my new Pluralsight course&lt;/a&gt; now to learn about working with RavenDB 4! RavenDB is available for free, &lt;a href="https://ravendb.net/download"&gt;even for production use&lt;/a&gt;.&lt;/p&gt;
&lt;h2 id="what-youll-learn"&gt;What you'll learn&lt;/h2&gt;
&lt;p&gt;You can &lt;a href="https://app.pluralsight.com/player?name=8b3d5a8b-83e2-4b63-883a-906cac0f705c&amp;amp;mode=live&amp;amp;clip=0&amp;amp;course=ravendb-4-getting-started&amp;amp;author=kamran-ayub"&gt;watch the course overview for free&lt;/a&gt;, if you prefer.&lt;/p&gt;
&lt;p&gt;Otherwise, from the course page:&lt;/p&gt;
&lt;blockquote class="blockquote"&gt;
&lt;p&gt;RavenDB is a cross-platform NoSQL distributed document database designed for small to enterprise-level applications. In this course, RavenDB 4: Getting Started, you’ll learn how to leverage RavenDB in the context of .NET application development. First, you’ll learn what RavenDB brings to the table and what problems it will help solve. Next, you’ll see how to create, update, and query data with the .NET client SDK. Finally, you’ll discover how to manage Raven using the first-class &amp;quot;Studio&amp;quot; UI experience. When you’re finished with this course, you’ll have a foundational knowledge of Raven enabling you to use it in your next NoSQL-based application.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;The course is organized around a sample application (that is &lt;a href="https://github.com/kamranayub/pluralsight-ravendb-4-getting-started"&gt;publicly available&lt;/a&gt;) written in ASP.NET Core and C#. It's pretty simple, on purpose, to showcase the major features of Raven.&lt;/p&gt;
&lt;h2 id="creation-process"&gt;Creation process&lt;/h2&gt;
&lt;p&gt;This course is only around 2 hours compard to &lt;a href="https://www.packtpub.com/application-development/introduction-typescript-video"&gt;my TypeScript course&lt;/a&gt; which is a full 8 hours long but this time I decided to track my time more closely. The breakdown was roughly:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;em&gt;Content&lt;/em&gt; (slides, research, etc.): 33 hours&lt;/li&gt;
&lt;li&gt;&lt;em&gt;Planning&lt;/em&gt; (proposal, assessments, course wrap-up): 5 hours (?)&lt;/li&gt;
&lt;li&gt;&lt;em&gt;Recording&lt;/em&gt;: 13 hours&lt;/li&gt;
&lt;li&gt;&lt;em&gt;Code&lt;/em&gt;: 24 hours&lt;/li&gt;
&lt;li&gt;&lt;em&gt;Editing&lt;/em&gt;: 30 hours&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;To be fair, the last 3-4 weeks I did not end up tracking time so I estimated that based on previous hours, I spent around 100 hours of work. I started the course in mid-October so it was about 4 months of work. In that time, we had a two week trip in Hawaii and we also closed on a new house (in addition to normal fatherly duties for my then 10 month old)--hence I finished a month later than I had initially planned. The funny thing is, RavenDB 4 went stable the &lt;strong&gt;same day&lt;/strong&gt; the course went live! So the timing worked out great.&lt;/p&gt;
&lt;p&gt;As far as my workflow--I wrote all the code first for the course to fully understand what to teach and what would need to be covered. Then, I went one module at a time, working on content first then any code demos and then recording/editing. Even with all the code written, I still ended up moving some content around to make the flow more natural and introduce concepts in the right order.&lt;/p&gt;
&lt;h2 id="whats-next"&gt;What's next?&lt;/h2&gt;
&lt;p&gt;I plan to write a series of posts on Raven, maybe even do a few livestreams. Since I focused on the .NET SDK in the course I'd love to write a sample in Node, Go, and Python as well (these could be the subject of the livestreams). The course will be added to the official RavenDB site as a resource.&lt;/p&gt;
&lt;p&gt;As far as Pluralsight goes--I won't be starting a course immediately since I need to get the new house (and office!) in order and get ready for my &lt;a href="https://kamranicus.com/posts/2017-12-18-workshop-bots-javascript-node-minnewebcon"&gt;April workshop on Node.js Bots in Azure&lt;/a&gt; and May session on &lt;a href="https://kamranicus.com/posts/2018-01-31-ndc-minnesota-react-typescript-talk"&gt;TypeScript/React at NDC&lt;/a&gt;. I also need to propose the course and get it accepted! I would love a follow-up course to dive deeper into building with Raven as this course really only scratches the surface.&lt;/p&gt;
</content:encoded>
		</item>
		<item>
			<title>Scalable React &amp; TypeScript at NDC Minnesota</title>
			<link>https://kamranicus.com/posts/2018-01-31-ndc-minnesota-react-typescript-talk</link>
			<description>&lt;p&gt;&lt;img src="/assets/images/talks/ndc.jpg" class="img-fluid" alt="NDC Conferences"&gt;&lt;/p&gt;</description>
			<guid>https://kamranicus.com/posts/2018-01-31-ndc-minnesota-react-typescript-talk</guid>
			<pubDate>Thu, 01 Feb 2018 04:50:00 GMT</pubDate>
			<content:encoded>&lt;p&gt;&lt;img src="/assets/images/talks/ndc.jpg" class="img-fluid" alt="NDC Conferences" /&gt;&lt;/p&gt;
&lt;p&gt;I'm having a tough time coming to terms with what I'm about to write--but I'm honored that my scalable React and TypeScript talk has been accepted for &lt;a href="http://ndcminnesota.com"&gt;NDC Minnesota&lt;/a&gt;!&lt;/p&gt;
&lt;p&gt;&lt;a href="https://ndcminnesota.com/page/about-ndc"&gt;NDC is a big deal&lt;/a&gt; and I will be sharing the spotlight with such ubiquitous experts like K. Scott Allen &amp;amp; Michelle Bustamante, both of whom are giving workshops I can't decide between, Steve Sanderson, Brock Allen, and &lt;em&gt;more&lt;/em&gt;. OK OK sure, it's not NDC London or NDC Sydney--but it's &lt;strong&gt;still&lt;/strong&gt; NDC and I &lt;strong&gt;still&lt;/strong&gt; can't believe I was accepted. This is also a huge personal milestone as this will be my first conference that isn't just local.&lt;/p&gt;
&lt;h2 id="about-the-talk"&gt;About the talk&lt;/h2&gt;
&lt;p&gt;If you don't really follow me and are wondering what the talk will be about, well, &lt;a href="https://youtu.be/owcuEwn-pSM"&gt;you can watch it online&lt;/a&gt; (spoiler alert!). But I promise it's going to be different and better, somehow. In fact, my React rewrite might &lt;em&gt;actually&lt;/em&gt; be done by then!&lt;/p&gt;
&lt;h2 id="i.am.terrified"&gt;I. am. terrified.&lt;/h2&gt;
&lt;p&gt;Followed closely behind my excitement is a looming wave of terror--as I will need to refine, revamp, and level up my talk for a bigger audience. I've done it twice (once at Midwest.js and once within Target) and now I pray the third time will be a homerun.&lt;/p&gt;
&lt;h2 id="is-starting-strong"&gt;2018 is starting strong&lt;/h2&gt;
&lt;p&gt;As far as &lt;a href="https://kamranicus.com/posts/2018-01-01-2018-a-new-year"&gt;my goals&lt;/a&gt; for the year go, I think I have a good start. I've &lt;a href="https://kamranicus.com/posts/2017-12-18-workshop-bots-javascript-node-minnewebcon"&gt;got a workshop&lt;/a&gt; lined up for May as well, &lt;a href="https://kamranicus.com/posts/2017-10-10-becoming-a-pluralsight-author"&gt;my Pluralsight course&lt;/a&gt; is almost ready, and now I'm speaking at NDC. I've also been nominated for a Microsoft MVP (oops, did I not mention that... shh, the two of you who read this keep it down). We also just bought a house. And it's only January.&lt;/p&gt;
</content:encoded>
		</item>
		<item>
			<title>2017 Year in Review and 2018 Goals</title>
			<link>https://kamranicus.com/posts/2018-01-01-2018-a-new-year</link>
			<description>&lt;p&gt;It's good to have goals. Without goals, you're aimlessly wandering around on this space rock with nothing to do and no one to answer to. Some folks like that but I'm not one of them--I like having goals, for near and long-term. I have career goals that I work on with my manager, these are overall professional and community goals to help me personally grow.&lt;/p&gt;</description>
			<guid>https://kamranicus.com/posts/2018-01-01-2018-a-new-year</guid>
			<pubDate>Mon, 01 Jan 2018 14:50:00 GMT</pubDate>
			<content:encoded>&lt;p&gt;It's good to have goals. Without goals, you're aimlessly wandering around on this space rock with nothing to do and no one to answer to. Some folks like that but I'm not one of them--I like having goals, for near and long-term. I have career goals that I work on with my manager, these are overall professional and community goals to help me personally grow.&lt;/p&gt;
&lt;p&gt;I &lt;a href="https://kamranicus.com/posts/2017-01-02-year-in-review"&gt;got a lot done in 2016&lt;/a&gt; and continued the trend in 2017, let's break it down and end with my 2018 goals.&lt;/p&gt;
&lt;h1 id="year-in-review"&gt;2017 Year in Review&lt;/h1&gt;
&lt;h2 id="life"&gt;Life&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Achievement Unlocked: Father. My son was born in February!&lt;/li&gt;
&lt;li&gt;I &lt;a href="https://kamranicus.com/posts/2017-08-28-joined-target"&gt;started a new job&lt;/a&gt; at Target in August&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="publishing"&gt;Publishing&lt;/h2&gt;
&lt;p&gt;Some very exciting milestones were reached in 2017: my first course was published and I became a Pluralsight author!&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;I &lt;a href="https://kamranicus.com/posts/2017-01-31-introduction-to-typescript-course-packt-publishing"&gt;published my Introduction to TypeScript course&lt;/a&gt; on January 31&lt;/li&gt;
&lt;li&gt;In October, I &lt;a href="https://kamranicus.com/posts/2017-10-10-becoming-a-pluralsight-author"&gt;accepted a contract&lt;/a&gt; to author my first Pluralsight course on RavenDB 4! It's almost done so I will be an &amp;quot;official&amp;quot; author in 2018. This was a huge accomplishment!&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="open-source"&gt;Open Source&lt;/h2&gt;
&lt;p&gt;Overall, I'm still finding time to contribute to open source. My number of contributions was lower than 2016 but this year I had a new baby so I figure that's pretty good!&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/excaliburjs/Excalibur/pulls?page=1&amp;amp;q=is%3Apr+is%3Aclosed+author%3Akamranayub"&gt;34 PRs closed for Excalibur.js&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/kamranayub?tab=overview&amp;amp;from=2017-12-01&amp;amp;to=2017-12-31"&gt;840 contributions in 2017&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;In April, worked on &amp;quot;&lt;a href="https://github.com/excaliburjs/ludum-38"&gt;I Just Wanted Groceries&lt;/a&gt;&amp;quot; for the Ludum Dare 38 game jam&lt;/li&gt;
&lt;li&gt;In October I &lt;a href="https://www.youtube.com/playlist?list=PL3ac-9HYUzQjbIWk7BczVfPqVD2_BNWhE"&gt;started streaming&lt;/a&gt; every other Thursday on Twitch, working on OSS projects. I did 4 sessions with 3 recorded videos.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="new-tech"&gt;New Tech&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;I got my first Raspberry Pi and &lt;a href="https://kamranicus.com/posts/2017-02-21-building-a-raspberry-pi-3-baby-monitor-livestream-audio-video"&gt;built a baby monitor&lt;/a&gt;. My guide continues to be my most popular article on my site!&lt;/li&gt;
&lt;li&gt;&lt;a href="https://kamranicus.com/posts/2017-10-27-frontend-masters-node-api-graphql"&gt;Played with GraphQL&lt;/a&gt; and continue working with GQL full-time at work (it's awesome)&lt;/li&gt;
&lt;li&gt;I'm using &amp;quot;older&amp;quot; AngularJS at work but &lt;a href="https://kamranicus.com/posts/2017-10-06-webpack-karma-jest-babel-angularjs"&gt;integrating it with modern tools&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://kamranicus.com/posts/2017-11-20-node-chrome-headless-drone-image"&gt;Messing with Drone CI&lt;/a&gt; at work&lt;/li&gt;
&lt;li&gt;Did some &lt;a href="https://github.com/ansible/ansible/pulls/kamranayub"&gt;Ansible&lt;/a&gt; earlier in the year&lt;/li&gt;
&lt;li&gt;Did &lt;a href="https://github.com/rschiefer/MSDeployAllTheThings/pull/6"&gt;some VSTS extension&lt;/a&gt; stuff&lt;/li&gt;
&lt;li&gt;Did &lt;a href="https://kamranicus.com/posts/2017-02-04-powershell-dsc-git-lfs-binaries"&gt;some&lt;/a&gt; Git LFS &lt;a href="https://kamranicus.com/posts/2017-06-14-downloading-git-lfs-files-from-tfs-vsts"&gt;stuff&lt;/a&gt; with Powershell and DSC&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="speaking-and-conferences"&gt;Speaking and Conferences&lt;/h2&gt;
&lt;p&gt;I already reached one of my goals for 2018 &amp;quot;on accident,&amp;quot; which was doing a workshop.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;In December, I revealed I'll be &lt;a href="https://kamranicus.com/posts/2017-12-18-workshop-bots-javascript-node-minnewebcon"&gt;doing a half-day workshop&lt;/a&gt; at MinneWebCon 2018 on Azure bots&lt;/li&gt;
&lt;li&gt;I &lt;a href="https://kamranicus.com/posts/2017-07-14-midwestjs-react-typescript"&gt;spoke at Midwest.js 2017&lt;/a&gt; on React and TypeScript&lt;/li&gt;
&lt;li&gt;I attended &lt;a href="https://kamranicus.com/posts/2017-02-01-build-2017"&gt;MS Build 2017&lt;/a&gt; which was a lot of fun&lt;/li&gt;
&lt;li&gt;I gave the same talk from Midwest.js at Target's internal &amp;quot;InnerConf&amp;quot; conference&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="games"&gt;Games&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/excaliburjs/ludum-38"&gt;Made a game&lt;/a&gt; for Ludum Dare 38&lt;/li&gt;
&lt;li&gt;&lt;a href="https://keeptrackofmygames.com/users/kamranicus/lists/played/?sortBy=DateAdded"&gt;Finished&lt;/a&gt; Horizon: Zero Dawn, Dishonored 2, Life is Strange, and Super Mario: Odyssey. Haven't beaten Zelda yet.&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id="goals"&gt;2018 Goals&lt;/h1&gt;
&lt;p&gt;In 2016 I didn't lay out my goals in a post, I had them in my head. I'd like to write them down here so I can compare how I did at the year end. Let's do it!&lt;/p&gt;
&lt;h2 id="primary-goals"&gt;Primary Goals&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Publish 1 more Pluralsight course (excludes one in progress)&lt;/li&gt;
&lt;li&gt;&lt;del&gt;Host a half-day workshop (scheduled for April)&lt;/del&gt; (&lt;a href="https://kamranicus.com/posts/2018-04-29-azure-nodejs-workshop-minnewebcon"&gt;DONE&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;&lt;del&gt;Participate in a LD game jam&lt;/del&gt; (&lt;a href="https://kamranicus.com/posts/2018-04-29-ludum-dare-41-post-mortem"&gt;DONE&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;&lt;del&gt;Attend and present at 2 conferences&lt;/del&gt; (&lt;a href="https://kamranicus.com/posts/2018-04-29-azure-nodejs-workshop-minnewebcon"&gt;DONE&lt;/a&gt; and &lt;a href="https://kamranicus.com/posts/2018-05-11-ndc-minnesota-typescript-react"&gt;DONE&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Attend and present at a local user group (scheduled for Sept)&lt;/li&gt;
&lt;li&gt;Continue doing code livestreams&lt;/li&gt;
&lt;li&gt;Finish KTOMG UI revamp with React&lt;/li&gt;
&lt;li&gt;Publish another Pi guide for a project I have in mind&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="stretch-goals"&gt;Stretch Goals&lt;/h2&gt;
&lt;p&gt;My primary goals are based on previous milestones that I think I can continue. I also want to have some stretch goals to work towards:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Become a Microsoft MVP:&lt;/strong&gt; I spread the love around TypeScript and Azure a lot in my talks and work, I'd like to work towards becoming an MVP.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Publish 2 more Pluralsight courses:&lt;/strong&gt; I'm confident I can do at least 1 course in 2018, I'd love to do two!&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Host a full-day workshop&lt;/strong&gt;: This one will be a tough one but with a half-day workshop goal already in progress, I should try for a full-day--even if it's at work and not publicly. Target hosts internal workshops and I've already signaled my intent to do one for 2018.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Stream 10 sessions&lt;/strong&gt;: I streamed 3 sessions in 2017 and took a holiday break. In January I want to start back up and continue it for the rest of the year, if I can make it work.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Phew, that's a lot! We're going to see if I can achieve some of these in 2018 and what ends up carrying over to 2019. Good luck working towards your own goals for this new year!&lt;/p&gt;
</content:encoded>
		</item>
		<item>
			<title>Workshop for Node.js Bots in Azure at MinneWebCon 2018</title>
			<link>https://kamranicus.com/posts/2017-12-18-workshop-bots-javascript-node-minnewebcon</link>
			<description>&lt;p&gt;You know when you accidentally reach a goal sooner than you expect? That's exactly what happened when I originally submitted a session to &lt;a href="http://minnewebcon.org/attend"&gt;MinneWebCon 2018&lt;/a&gt; on building bots with Azure and Node.js. Instead of &lt;em&gt;just&lt;/em&gt; giving a talk, I'll be teaching a half-day workshop! That was one of my 2018 goals!&lt;/p&gt;</description>
			<guid>https://kamranicus.com/posts/2017-12-18-workshop-bots-javascript-node-minnewebcon</guid>
			<pubDate>Tue, 19 Dec 2017 02:33:00 GMT</pubDate>
			<content:encoded>&lt;p&gt;You know when you accidentally reach a goal sooner than you expect? That's exactly what happened when I originally submitted a session to &lt;a href="http://minnewebcon.org/attend"&gt;MinneWebCon 2018&lt;/a&gt; on building bots with Azure and Node.js. Instead of &lt;em&gt;just&lt;/em&gt; giving a talk, I'll be teaching a half-day workshop! That was one of my 2018 goals!&lt;/p&gt;
&lt;h2 id="about-the-workshop"&gt;About the workshop&lt;/h2&gt;
&lt;p&gt;This'll be a fun one. I've &lt;a href="http://blog.keeptrackofmygames.com/post/154048281826/updates-for-november-2016"&gt;developed bots&lt;/a&gt; before on Azure using &lt;a href="https://dev.botframework.com/"&gt;Microsoft Bot Framework&lt;/a&gt; and I've used Azure Functions but I haven't yet married the two.&lt;/p&gt;
&lt;p&gt;In this workshop, we'll build a chat bot on Azure Functions that will respond to input and hold state. I don't know the details of what we'll build but I'll be scoping it to a 3 hour exercise.&lt;/p&gt;
&lt;p&gt;My plan so far is for people to learn:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;How to use the Azure Functions portal&lt;/li&gt;
&lt;li&gt;How to use the Microsoft Bot Framework&lt;/li&gt;
&lt;li&gt;How to publish a bot to a provider (e.g. Twilio)&lt;/li&gt;
&lt;li&gt;How to make the bot in JavaScript&lt;/li&gt;
&lt;li&gt;How to make the bot remember information about the conversation&lt;/li&gt;
&lt;li&gt;(Maybe) How to connect Azure Functions to GitHub&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;I'm pretty sure we can build that in 3 hours even for folks who have little to no experience with Azure. It's really simple!&lt;/p&gt;
&lt;p&gt;So what are you waiting for? &lt;a href="http://minnewebcon.org/attend"&gt;Register now!&lt;/a&gt;&lt;/p&gt;
</content:encoded>
		</item>
		<item>
			<title>Here's a Drone Docker image with Node.js and Chrome headless</title>
			<link>https://kamranicus.com/posts/2017-11-20-node-chrome-headless-drone-image</link>
			<description>&lt;p&gt;I worked on a fun little aside this last week at work. We are using &lt;a href="https://github.com/drone/drone"&gt;Drone&lt;/a&gt; to perform our CI builds (it's just like &lt;a href="http://travis-ci.org"&gt;Travis CI&lt;/a&gt;). Well, the default Docker &lt;code&gt;node&lt;/code&gt; image is built on Debian and when run on Drone 5 it does not contain all the packages needed to use Chrome Headless (as &lt;a href="https://github.com/Googlechrome/puppeteer/issues/290"&gt;documented in this GH issue&lt;/a&gt;). We're using Puppeteer to run Chrome headless with Karma to run our Angular tests.&lt;/p&gt;</description>
			<guid>https://kamranicus.com/posts/2017-11-20-node-chrome-headless-drone-image</guid>
			<pubDate>Mon, 20 Nov 2017 20:52:00 GMT</pubDate>
			<content:encoded>&lt;p&gt;I worked on a fun little aside this last week at work. We are using &lt;a href="https://github.com/drone/drone"&gt;Drone&lt;/a&gt; to perform our CI builds (it's just like &lt;a href="http://travis-ci.org"&gt;Travis CI&lt;/a&gt;). Well, the default Docker &lt;code&gt;node&lt;/code&gt; image is built on Debian and when run on Drone 5 it does not contain all the packages needed to use Chrome Headless (as &lt;a href="https://github.com/Googlechrome/puppeteer/issues/290"&gt;documented in this GH issue&lt;/a&gt;). We're using Puppeteer to run Chrome headless with Karma to run our Angular tests.&lt;/p&gt;
&lt;p&gt;We were running a bash script to install them when the build started but I went ahead and just packaged it all as a Docker container. This is a general purpose container image but using it with Drone sped up our builds by an order of magnitude.&lt;/p&gt;
&lt;p&gt;You can find it in &lt;a href="https://github.com/kamranayub/drone-images"&gt;my Drone image repository&lt;/a&gt;. I'll be sure to add anymore useful Drone images I end up making there too!&lt;/p&gt;
&lt;p&gt;With Puppeteer, I also had to use these args:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;--no-sandbox --disable-setuid-sandbox
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;It's possible you don't need them but once I got it working I didn't revisit it in depth.&lt;/p&gt;
&lt;p&gt;I could also publish this to the public registry, just let me know in the comments if you'd like me to--otherwise, feel free to do so.&lt;/p&gt;
</content:encoded>
		</item>
		<item>
			<title>Dynamic component rendering in AngularJS</title>
			<link>https://kamranicus.com/posts/2017-11-17-dynamic-angularjs-components</link>
			<description>&lt;p&gt;We had a feature we needed in our AngularJS 1.5 app recently that required us to show different Angular components based on some data we got back from an API--basically we ask some questions and those questions can have different "types" of answers: number, text, list of values, multi-list of values, external API list, etc.&lt;/p&gt;</description>
			<guid>https://kamranicus.com/posts/2017-11-17-dynamic-angularjs-components</guid>
			<pubDate>Fri, 17 Nov 2017 18:45:00 GMT</pubDate>
			<content:encoded>&lt;p&gt;We had a feature we needed in our AngularJS 1.5 app recently that required us to show different Angular components based on some data we got back from an API--basically we ask some questions and those questions can have different &amp;quot;types&amp;quot; of answers: number, text, list of values, multi-list of values, external API list, etc.&lt;/p&gt;
&lt;p&gt;These answer types were a good candidate to keep encapsulated inside of Angular components: they manage their own state and just use component bindings to bind data or call the overall parent controller.&lt;/p&gt;
&lt;h2 id="hacking-ng-include-for-fun-and-profit"&gt;Hacking ng-include for fun and profit&lt;/h2&gt;
&lt;p&gt;So the way we got this working was based on &lt;a href="https://stackoverflow.com/a/40640326/109458"&gt;this StackOverflow post&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;This works because &lt;code&gt;ng-include&lt;/code&gt; directive takes a path to an HTML file. But &lt;code&gt;$templateCache&lt;/code&gt; can be used to manipulate the HTML cache and insert cache entries. In this case, you just insert a key with the name of your component and then you can use it as an expression in &lt;code&gt;ng-include&lt;/code&gt;. Now, the extra part is where that template cache item has to include your component directive:&lt;/p&gt;
&lt;pre&gt;&lt;code class="language-html"&gt;$templateCache.put('widgetPie', '&amp;lt;widget-pie&amp;gt;&amp;lt;/widget-pie&amp;gt;');
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;It's worth noting the template inherits the context of the &lt;code&gt;ng-include&lt;/code&gt;, so you can pass bindings in like you would expect:&lt;/p&gt;
&lt;pre&gt;&lt;code class="language-html"&gt;$templateCache.put('widgetPie', '&amp;lt;widget-pie data=&amp;quot;$ctrl.someData&amp;quot;&amp;gt;&amp;lt;/widget-pie&amp;gt;');
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;In our case we had more templates than I wanted to write individual statements for, so the way we built up the &lt;code&gt;$templateCache&lt;/code&gt; was just like this:&lt;/p&gt;
&lt;pre&gt;&lt;code class="language-js"&gt;import * as components from &amp;quot;./components&amp;quot;;

angular
 .module('app')
 .run(function ($templateCache) {
    _.values(components).forEach(({ type, include }) =&amp;gt; {
      const tag = `answer-${type}`
      $templateCache.put(tag, `&amp;lt;${tag} question=&amp;quot;question&amp;quot;&amp;gt;&amp;lt;/${tag}&amp;gt;`);
    });
 });
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;The cache key and template are generated by convention from the types of answers in each component (e.g. &lt;code&gt;answer-text&lt;/code&gt;). The &lt;code&gt;question&lt;/code&gt; binding is using the name of a known variable within the &lt;code&gt;ng-repeat&lt;/code&gt; in the parent template.&lt;/p&gt;
&lt;p&gt;The &lt;code&gt;index.js&lt;/code&gt; file within the &lt;code&gt;components&lt;/code&gt; directory just exports all supported components:&lt;/p&gt;
&lt;pre&gt;&lt;code class="language-js"&gt;export { component as text } from './answer-text.component'
export { component as number } from './answer-number.component'
export { component as lov } from './answer-lov.component'
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Since we are using &lt;code&gt;import * as components&lt;/code&gt; all these get plopped into a &lt;code&gt;components&lt;/code&gt; object where each key is the exported name and the value is a slightly modified component object:&lt;/p&gt;
&lt;pre&gt;&lt;code class="language-js"&gt;// answer-text.component.js
export var component = {
  type: &amp;quot;text&amp;quot;,
  controller: () =&amp;gt; {},
  template: `&amp;lt;input ng-model=&amp;quot;$ctrl.question&amp;quot; /&amp;gt;`,
  bindings: {
    question: &amp;quot;&amp;lt;&amp;quot;
  }
}

export var module = angular.module(`components.answers.${component.type}`, [])
  .component(_.camelCase(`answer-${component.type}`), component)
  .name;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Not shown here, but you need to make sure to add the component Angular module as a dependency somewhere in your app. That's what &lt;code&gt;module&lt;/code&gt; is for.&lt;/p&gt;
&lt;p&gt;The &lt;code&gt;type&lt;/code&gt; property is for the purposes of the template cache. I'm using Lodash's &lt;code&gt;_.camelCase&lt;/code&gt; to create an Angular-compatible component name which is based on the &lt;code&gt;type&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Now we have a convention that uses the answer type to generate the HTML to inject via &lt;code&gt;ng-include&lt;/code&gt; and pass in common bindings to the components:&lt;/p&gt;
&lt;pre&gt;&lt;code class="language-html"&gt;// parent.component.html
&amp;lt;div ng-repeat=&amp;quot;question in $ctrl.questions&amp;quot;&amp;gt;
  &amp;lt;label&amp;gt;{{ question.title }}&amp;lt;/label&amp;gt;
  &amp;lt;ng-include src=&amp;quot;answer-{{ question.answer_type }}&amp;quot;&amp;gt;&amp;lt;/ng-include&amp;gt;
&amp;lt;/div&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Now depending on the &lt;code&gt;answer_type&lt;/code&gt; of the question, the appropriate answer component will be rendered.&lt;/p&gt;
&lt;p&gt;It's probably possible to create a Angular directive that could make this easier but it's not so bad once you have the pattern.&lt;/p&gt;
&lt;p&gt;PS. I'm using &lt;a href="https://kamranicus.com/posts/2017-10-06-webpack-karma-jest-babel-angularjs"&gt;ES2015 and Webpack&lt;/a&gt; in my examples.&lt;/p&gt;
&lt;h2 id="trolling-with-react"&gt;Trolling with React&lt;/h2&gt;
&lt;p&gt;Figuring out how to achieve this in AngularJS was a bit time consuming (I found the post after searching for awhile, then had to rig up what you saw above).&lt;/p&gt;
&lt;p&gt;Even though I'm writing AngularJS more day to day, I can appreciate how much more productive I feel in React. What does it take to achieve the same pattern? I typed this up in a minute just now for the blog post:&lt;/p&gt;
&lt;pre&gt;&lt;code class="language-js"&gt;const Parent = ({ questions, onAnswerChange }) =&amp;gt;
  &amp;lt;div&amp;gt;
    {questions.map(question =&amp;gt; 
      &amp;lt;div&amp;gt;
        &amp;lt;label&amp;gt;{question.title}&amp;lt;/label&amp;gt;
        {React.createElement(
          &amp;quot;Answer&amp;quot; + _.startCase(question.answer_type), { question, onAnswerChange })}
      &amp;lt;/div&amp;gt;
    )}
  &amp;lt;/div&amp;gt;

const AnswerText = ({ question, onAnswerChange }) =&amp;gt; 
  &amp;lt;input 
    value={question.answer} 
    onChange={(e) =&amp;gt; onAnswerChange(question, e.target.value)} 
  /&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;I love React. It's just JavaScript (and JSX). No module loading, no dependency injection, just... components. Yes, state change is different (this isn't modifying &lt;code&gt;question.answer&lt;/code&gt;) but I like the separation of concerns.&lt;/p&gt;
</content:encoded>
		</item>
		<item>
			<title>Frontend Masters Workshop: Node API Design v2 with Scott Moss</title>
			<link>https://kamranicus.com/posts/2017-10-27-frontend-masters-node-api-graphql</link>
			<description>&lt;p&gt;On Oct 16 &amp;amp; 17 a fellow coworker and I attended a &lt;a href="https://frontendmasters.com"&gt;Frontend Masters&lt;/a&gt; workshop in person on &lt;a href="https://frontendmasters.com/workshops/api-design-in-node-v2/"&gt;Node.js API Design by Scott Moss&lt;/a&gt;.&lt;/p&gt;</description>
			<guid>https://kamranicus.com/posts/2017-10-27-frontend-masters-node-api-graphql</guid>
			<pubDate>Fri, 27 Oct 2017 19:02:00 GMT</pubDate>
			<content:encoded>&lt;p&gt;On Oct 16 &amp;amp; 17 a fellow coworker and I attended a &lt;a href="https://frontendmasters.com"&gt;Frontend Masters&lt;/a&gt; workshop in person on &lt;a href="https://frontendmasters.com/workshops/api-design-in-node-v2/"&gt;Node.js API Design by Scott Moss&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;I love FEM workshops (this is my second time in-person) since they're pretty hands-on and you can interactively ask questions. It's awesome that they are FREE to attend in-person if you get chosen and I've been lucky enough to attend both times I applied. It's only a block away from my work and bus stop in downtown Minneapolis.&lt;/p&gt;
&lt;h2 id="what-was-it-about"&gt;What was it about?&lt;/h2&gt;
&lt;p&gt;The workshop was on how to build native Node.js APIs using Express with both REST-style endpoints &lt;em&gt;and&lt;/em&gt; a single &lt;a href="https://graphql.org"&gt;GraphQL&lt;/a&gt; endpoint.&lt;/p&gt;
&lt;p&gt;The code for the workshop is up on GitHub: &lt;a href="https://github.com/FrontendMasters/api-design-node-v2"&gt;https://github.com/FrontendMasters/api-design-node-v2&lt;/a&gt;&lt;/p&gt;
&lt;h2 id="why-was-it-valuable"&gt;Why was it valuable?&lt;/h2&gt;
&lt;p&gt;I've been doing Node for awhile but it's only been since I started my new job I've been doing it full-time so I definitely wanted to brush up on the latest practices. That's why I find FEM workshops valuable--they bring in experts that have &lt;em&gt;practical&lt;/em&gt; experience in the technologies so they can share their own approaches to the topic.&lt;/p&gt;
&lt;p&gt;On my current project we use Node + Express stack heavily and I wanted to get a sense of how we were doing compared to the latest practices. It turns out there's some opportunities!&lt;/p&gt;
&lt;h2 id="what-did-i-learn"&gt;What did I learn?&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;Using Hot Module Replacement (HMR) with a vanilla Node.js server. Most of the documentation and examples around Webpack HMR are in the context of React but it turns out you can set it up to be used in a vanilla Express app too. See &lt;a href="https://github.com/FrontendMasters/api-design-node-v2/blob/master/src/index.js"&gt;server's index.js&lt;/a&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;I especially appreciated Scott's guidance on using multiple Express routers together. Right now our project configures a single router but the cool thing about Express is you can actually create specific Routers that handle a few things then &lt;em&gt;compose&lt;/em&gt; them together through the middleware pipeline. &lt;a href="https://github.com/FrontendMasters/api-design-node-v2/blob/lesson-5-solution/src/server.js"&gt;Example importing &lt;code&gt;restRouter&lt;/code&gt;&lt;/a&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Seeing how to handle API errors via middleware was valuable. Right now we don't really have a catch all handler, so I've already proposed a solution using what I learned from the workshop. In our case, we're using &lt;code&gt;request-promise&lt;/code&gt; package so our requests are async and we need to handle unhandled rejections from Bluebird. &lt;a href="https://github.com/FrontendMasters/api-design-node-v2/blob/lesson-5-solution/src/api/modules/errorHandler.js"&gt;Example API error handler middleware&lt;/a&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Seeing &lt;code&gt;async/await&lt;/code&gt; in action. I come from C# so I've been using &lt;code&gt;async&lt;/code&gt; and &lt;code&gt;await&lt;/code&gt; with .NET for a long time but it's &lt;em&gt;finally&lt;/em&gt; available in JS. The project is using Babel to transform the async/await into generators. I liked seeing examples of how to use it with promise-based APIs. &lt;a href="https://github.com/FrontendMasters/api-design-node-v2/blob/master/webpack.config.js"&gt;See webpack config&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;&lt;a href="https://graphql.org"&gt;GraphQL&lt;/a&gt;&lt;/strong&gt;! I was most excited about learning some &lt;em&gt;actual&lt;/em&gt; GraphQL. So there are a few things that started to make sense after going through the workshop:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;GraphQL itself is not a &lt;em&gt;thing&lt;/em&gt;, it's a specification. There are various implementations for different frameworks/languages.&lt;/li&gt;
&lt;li&gt;GraphQL has a single endpoint. Versioning is done through the query. GraphQL makes you define a schema using Flow/Typescript-like &amp;quot;types&amp;quot; (see &lt;a href="https://github.com/FrontendMasters/api-design-node-v2/blob/master/src/api/resources/playlist/playlist.graphql"&gt;example&lt;/a&gt;) using a query language (hence GraphQL) for all inputs and outputs, and writes/updates are treated separately as &amp;quot;mutations.&amp;quot;&lt;/li&gt;
&lt;li&gt;GraphQL does &lt;strong&gt;not&lt;/strong&gt; dictate how the server handles associations; you handle it through functions called &lt;em&gt;resolvers.&lt;/em&gt; If you've used Redux, it's a bit like reducers--they manage a single slice of the schema. So you might resolve an association through an external API, database join/include, in-memory cache, etc. It's totally up to you. The beauty is the consumer doesn't care and just requests what they need.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;After writing some GraphQL and getting hands-on, I'm a believer. I loved it. It feels really good to design an API using GraphQL types and way more natural than REST design did; I don't think I've ever seen a PURE RESTful API design--it's always been weird hybrid stuff, even my own APIs I design return view models, handle contextual responses, etc. As soon as I can make it work, I'm switching to &lt;a href="https://github.com/graphql-dotnet/graphql-dotnet"&gt;GraphQL.NET&lt;/a&gt; for my own work. I'm pretty certain RavenDB will be a very good companion to a GraphQL backend. A &lt;strong&gt;G&lt;/strong&gt;QL + &lt;strong&gt;R&lt;/strong&gt;avenDB + &lt;strong&gt;Rea&lt;/strong&gt;ct + .&lt;strong&gt;N&lt;/strong&gt;ET Core stack sounds mighty fine to me (hmm, the GRREAN stack?).&lt;/p&gt;
&lt;p&gt;For my job, we do a lot of chatty API calls to retrieve data from various endpoints. The thing is that our endpoints are usually single-purpose which is &lt;em&gt;good&lt;/em&gt; but because of that we have to make multiple calls or hit multiple endpoints for our UIs/backend to the data they need which isn't good. There are ways to help solve that using API gateways, proxies, etc. but GraphQL provides an easy-to-consume abstraction layer that lets you choose how to handle it within your business domain with standard rules. I love it.&lt;/p&gt;
&lt;p&gt;Part of me that likes the open web and HTTP standards wonders about the singular endpoint and lack of URL design but the other part of me that wants to get shit done is currently winning.&lt;/p&gt;
&lt;p&gt;Scott summed up GraphQL pretty succinctly, &amp;quot;I'm never making a REST API again.&amp;quot;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;I now use &lt;a href="https://github.com/jakubroztocil/httpie"&gt;HTTPie&lt;/a&gt; instead of curl&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;So that's that! I probably can't enumerate every little thing I learned but that's what stuck out to me as I reflected on it for this post.&lt;/p&gt;
</content:encoded>
		</item>
		<item>
			<title>Becoming a Pluralsight Author</title>
			<link>https://kamranicus.com/posts/2017-10-10-becoming-a-pluralsight-author</link>
			<description>&lt;p&gt;&lt;img src="images/pluralsight.jpg" class="img-fluid" alt="Pluralsight"&gt;&lt;/p&gt;</description>
			<guid>https://kamranicus.com/posts/2017-10-10-becoming-a-pluralsight-author</guid>
			<pubDate>Wed, 11 Oct 2017 03:50:00 GMT</pubDate>
			<content:encoded>&lt;p&gt;&lt;img src="images/pluralsight.jpg" class="img-fluid" alt="Pluralsight" /&gt;&lt;/p&gt;
&lt;p&gt;I have to admit it's tough for me to comprehend writing this post even though I passed the audition months ago. When I applied to become a &lt;a href="https://pluralsight.com"&gt;Pluralsight&lt;/a&gt; author, I wasn't sure what to expect. Now, here I am receiving the green light on my first course (it's on RavenDB 4, more on that later). Yes, &lt;a href="https://kamranicus.com/posts/2017-01-31-introduction-to-typescript-course-packt-publishing"&gt;I successfully published my TypeScript course&lt;/a&gt; last January through Packt but I didn't necessarily consider myself &amp;quot;Pluralsight author&amp;quot; material. What does that even mean exactly?&lt;/p&gt;
&lt;h2 id="who-is-a-pluralsight-author"&gt;Who is a Pluralsight author?&lt;/h2&gt;
&lt;p&gt;John Sonmez. John Papa. Scott Hanselman. Jon Skeet. K. Scott Allen. These are household names to me and my coworkers, especially in the Microsoft space. These are Pluralsight authors that are generally well-respected and well-known, they inspire me and [hundreds of?] thousands to be better developers in our careers. They have thousands of followers, speak at conferences around the world, and maintain celeb-to-quasi-celeb status within the community.&lt;/p&gt;
&lt;p&gt;I can tell you it feels &lt;strong&gt;weird&lt;/strong&gt; to be able to say I am lumped in the same category as those folks. Some of them literally wrote the book(s) on what I built my career on. Like I said, I can barely comprehend it.&lt;/p&gt;
&lt;h2 id="the-common-thread"&gt;The common thread&lt;/h2&gt;
&lt;p&gt;That's only 5 people though. If you go ahead and peruse the &lt;a href="https://www.pluralsight.com/authors"&gt;Pluralsight authors&lt;/a&gt; list, you realize &lt;strong&gt;there are a lot of authors.&lt;/strong&gt; I recognize many but I also don't know most of them, I admit I probably won't ever follow and know them all (unless there's something that will automatically have me follow Pluralsight authors, then I'll use that).&lt;/p&gt;
&lt;p&gt;I think the amazing thing is, everyone on that list became good at what they did by writing books, speaking around the world, or by knowing something enough to teach it effectively. The common thread is that &lt;strong&gt;they all are effective educators and inspire people.&lt;/strong&gt; It could easily be someone else on that list that I've never heard of that ends up making someone else's Top 5 Pluralsight inspiring author. I bet you have a Top 5 yourself.&lt;/p&gt;
&lt;h2 id="the-audition"&gt;The audition&lt;/h2&gt;
&lt;p&gt;I think what surprised me most about the audition process was how straightforward it was. I had some preconceived notions about what it took to be an author (see above). It turns out, it really is about effective teaching because none of my prior work was a consideration during the process. I did not have to submit a resume. I didn't need to &amp;quot;prove&amp;quot; my cred. Nobody ever asked me what I did to get where I am.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;It's all about the audition.&lt;/strong&gt; That is the gauntlet you are measured by. It's a 8-10 minute video that you edit and design yourself on a topic that'd be close to what you'd teach. I decided to do mine on modeling uniqueness in RavenDB. I know exactly how long I spent because I tracked it: 28 hours and 45 minutes. See for yourself.&lt;/p&gt;
&lt;p&gt;&lt;img src="images/2017-10-10-23-33-38.png" class="img-fluid" alt="Time tracking" /&gt;&lt;/p&gt;
&lt;p&gt;The &amp;quot;planning&amp;quot; column was more about dedicated planning time: laying out audition document plan, writing notes, etc. There was a lot of planning within the other columns that was just part of doing that thing.&lt;/p&gt;
&lt;p&gt;I appreciated the fact the audition was low stress. There's a gap there from 4/21 to 5/19 due to conferences and travel. That was OK, it's at your own pace. Some folks will probably even decide to withdraw; recording, editing, and content development is not everyone's cup of tea.&lt;/p&gt;
&lt;p&gt;You can clearly see I sent my audition at the end of May and I received a response June 7. Of course, they had to tease me in the subject:&lt;/p&gt;
&lt;p&gt;&lt;img src="images/2017-10-10-23-37-54.png" class="img-fluid" alt="Audition result" /&gt;&lt;/p&gt;
&lt;p&gt;Needless to say, I was nervous. I think I had my wife read it out loud to me.&lt;/p&gt;
&lt;blockquote class="blockquote"&gt;
&lt;p&gt;&amp;quot;Thank you for taking the time and effort to submit an audition video to Pluralsight. Our Curriculum Team has completed review and your audition is...&amp;quot;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;That's it, I failed, it wasn't good enough, I knew I should have spent more time explaining--&lt;/p&gt;
&lt;blockquote class="blockquote"&gt;
&lt;p&gt;&amp;quot;APPROVED.&amp;quot;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;em&gt;Oh shit. Oh shiiiit. Ohshitohshitohsit. WHAT. WHATTTTTTT.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;I hugged my wife very hard and made sure to tell my 4mo that daddy was accepted as a &lt;strong&gt;freakin'&lt;/strong&gt; Pluralsight author.&lt;/p&gt;
&lt;p&gt;One thing I really appreciate is real feedback from reviewers. I want constructive feedback and want to continuously improve the quality of what I put out. I'll share what I received:&lt;/p&gt;
&lt;blockquote class="blockquote"&gt;
&lt;p&gt;Kamran has a real knack for interleaving conceptual technical information with concrete behavior and experiences, all over a conversational narrative that is easy to follow. I really appreciate his arrangement of demos, code, and slides. Each phase of the demo is isolated with one specific goal, and each subsequent phase builds upon the knowledge gained in the last.&lt;/p&gt;
&lt;p&gt;Demo code is small and pragmatic, discussion targets only the data access code and assumes a solid background in C# and async code which is appropriate.&lt;/p&gt;
&lt;p&gt;A few areas where I see room for improvement:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;use of visuals is really good (eg the timeline at ~2:00 and the concurrency image at ~7:00), and I think Kamran should explore this skill more. Honestly his marriage of visuals and narrative is better than most new authors, and I really want to see how far he can stretch those muscles.&lt;/li&gt;
&lt;li&gt;the title slide is lingers a bit, I think there are opportunities for visuals there to help explain some of the motivation.&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;p&gt;This is how to give good feedback. Lead with the good, finish with opportunities--something I can take away for next time and learn from.&lt;/p&gt;
&lt;p&gt;I may share my audition (with approval) with &amp;quot;director commentary&amp;quot; on &lt;a href="https://www.youtube.com/channel/UCq6oaAI3ZH2rGlmC9VqJm1g"&gt;my YouTube channel&lt;/a&gt;, if that's something that would interest folks.&lt;/p&gt;
&lt;p&gt;That's it! The next steps were to propose my course and chat with the curriculum director. I spent time researching and planning my proposal out, I even created a mockup demo with working code to send as an example.&lt;/p&gt;
&lt;p&gt;Org-wide stuff kept my editor busy with work so it wasn't until pretty recently that the ball started rolling again. Finally this last Sunday my &amp;quot;statement of work&amp;quot; was signed. It was official!&lt;/p&gt;
&lt;h2 id="go-ahead-and-audition"&gt;Go ahead and audition&lt;/h2&gt;
&lt;p&gt;My advice to you or anyone reading this who also thinks they may have something to teach but still aren't sure whether you're &amp;quot;Pluralsight material&amp;quot; is to &lt;strong&gt;&lt;a href="https://www.pluralsight.com/teach"&gt;just submit an audition&lt;/a&gt; (and maybe give me a shoutout?).&lt;/strong&gt; If you pass and can teach something new and inspiring to someone else, &lt;strong&gt;you are Pluralsight material.&lt;/strong&gt;&lt;/p&gt;
&lt;h2 id="jurys-out"&gt;Jury's out&lt;/h2&gt;
&lt;p&gt;My first course isn't published &lt;em&gt;yet&lt;/em&gt; which means the jury's out on whether I deserve to be in that author list. I keep myself grounded by understanding that the course could still be rejected for whatever reason. I've come this far though and I'm going to try my &lt;strong&gt;damnedest&lt;/strong&gt; to earn my place. This is an opportunity that I've literally only dreamed about and never thought would happen. Wish me luck!&lt;/p&gt;
&lt;h2 id="jurys-in"&gt;Jury's in&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;May 2018:&lt;/strong&gt; The course has been live for several months now with a great reception! I'm counting 12 5-star reviews so far which I'm super happy about (I could calculate the ratio of views/reviews but it's similar to any media--a very small percentage of people rate things). Here's to (hopefully) more courses in the future! 🍻&lt;/p&gt;
</content:encoded>
		</item>
		<item>
			<title>Using AngularJS 1.5 with webpack, babel, and Karma/Jest</title>
			<link>https://kamranicus.com/posts/2017-10-06-webpack-karma-jest-babel-angularjs</link>
			<description>&lt;p&gt;This took me awhile to get right so I'm sharing my experience trying to get webpack 3, babel 6, and Karma to work together for testing Angular 1.5 apps. I also have an example using Jest, which I actually prefer over Karma.&lt;/p&gt;</description>
			<guid>https://kamranicus.com/posts/2017-10-06-webpack-karma-jest-babel-angularjs</guid>
			<pubDate>Fri, 06 Oct 2017 18:00:00 GMT</pubDate>
			<content:encoded>&lt;p&gt;This took me awhile to get right so I'm sharing my experience trying to get webpack 3, babel 6, and Karma to work together for testing Angular 1.5 apps. I also have an example using Jest, which I actually prefer over Karma.&lt;/p&gt;
&lt;h2 id="some-context"&gt;Some context&lt;/h2&gt;
&lt;p&gt;Why bother with these modern build tools and Karma/Angular 1.5? Why not upgrade to ng 4 or migrate to React? For our team, there isn't yet a compelling reason to go and rewrite several apps when the product is stable and in production. Since code is spread out across several repositories and the team works in multiple codebases at a time, consistency is key.&lt;/p&gt;
&lt;p&gt;That said, we still want to be happy writing JavaScript and Babel+Webpack+ES2015 is a great combination.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Note:&lt;/strong&gt; I was actually using &lt;a href="https://facebook.github.io/jest/"&gt;Jest&lt;/a&gt; originally which worked great with Angular 1.5 &lt;em&gt;and&lt;/em&gt; our Node.js code! I'd highly recommend it &lt;em&gt;instead&lt;/em&gt; of Karma/Jasmine/Mocha/Chai because it's a single dependency with easy configuration. We switched back to Karma to maintain consistency with the rest of our codebases. Here's an &lt;a href="https://github.com/kamranayub/angularjs-sample-webpack-es6-jest"&gt;example repo&lt;/a&gt;.&lt;/p&gt;
&lt;h2 id="show-me-the-code"&gt;Show me the code&lt;/h2&gt;
&lt;p&gt;You probably are reading this because you're struggling right now to get the puzzle pieces to fit.&lt;/p&gt;
&lt;p&gt;With that in mind, here's a fully working repository with some specs to help you get off the ground.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Karma: &lt;a href="https://github.com/kamranayub/angularjs-sample-webpack-es6-karma"&gt;https://github.com/kamranayub/angularjs-sample-webpack-es6-karma&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Jest: &lt;a href="https://github.com/kamranayub/angularjs-sample-webpack-es6-jest"&gt;https://github.com/kamranayub/angularjs-sample-webpack-es6-jest&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;This is not meant to be a &amp;quot;starter&amp;quot; but you can use it however you want.&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Read on if you need specifics on each part of the puzzle.&lt;/p&gt;
&lt;h2 id="prior-art"&gt;Prior art&lt;/h2&gt;
&lt;p&gt;When I was trying to get my setup working, I referenced the following posts:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="http://mike-ward.net/2015/09/07/tips-on-setting-up-karma-testing-with-webpack/"&gt;Tips on setting up Karma testing with webpack&lt;/a&gt; - Mike Ward, Sep 2015&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/TheLarkInn/angular-starter-es6-webpack"&gt;angular-starter-es6-webpack&lt;/a&gt; - Sean Larkin, Aug 2016&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="configuring-webpack-babel"&gt;Configuring webpack &amp;amp; Babel&lt;/h2&gt;
&lt;p&gt;There's nothing different with my webpack or babel configuration when using Karma. Follow the standard setup guide for &lt;a href="https://github.com/babel/babel-loader"&gt;Babel + Webpack&lt;/a&gt;. The one addition I have is the &lt;a href="https://www.npmjs.com/package/babel-plugin-angularjs-annotate"&gt;babel-plugin-angularjs-annotate&lt;/a&gt; which is handy for dependency injection.&lt;/p&gt;
&lt;h2 id="configuring-karma"&gt;Configuring karma&lt;/h2&gt;
&lt;p&gt;This was the time suck. No matter what, it seemed I couldn't get things to process/compile the way I wanted.&lt;/p&gt;
&lt;p&gt;The root of my issue was that my webpack configuration was actually an &lt;em&gt;array&lt;/em&gt; of configuration objects and I was passing the array to the &lt;code&gt;webpack&lt;/code&gt; karma middleware and it expects a &lt;strong&gt;single&lt;/strong&gt; configuration. My bad.&lt;/p&gt;
&lt;p&gt;Here's the relevant snippet:&lt;/p&gt;
&lt;pre&gt;&lt;code class="language-js"&gt;    // This will be the new entry to webpack
    // so it should just be a single file
    files: [&amp;quot;src/index.tests.js&amp;quot;],

    // Preprocess test index and test files using
    // webpack (will run babel)
    preprocessors: {
      &amp;quot;src/index.tests.js&amp;quot;: [&amp;quot;webpack&amp;quot;],
      &amp;quot;src/**/*.test.js&amp;quot;: [&amp;quot;webpack&amp;quot;]
    },

    // Reference webpack config (single object)
    // and configure some middleware settings
    webpack: require(&amp;quot;./webpack.config&amp;quot;),
    webpackMiddleware: {
      noInfo: true,
      stats: &amp;quot;errors-only&amp;quot;
    },
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;I seemed to run into some issues when I tried using a glob pattern for the &lt;code&gt;files&lt;/code&gt; array, like &lt;code&gt;**/*.test.js&lt;/code&gt; so I switched to using a single file and that seemed to calm webpack down.&lt;/p&gt;
&lt;p&gt;That &lt;strong&gt;index.tests.js&lt;/strong&gt; file looks like:&lt;/p&gt;
&lt;pre&gt;&lt;code class="language-js"&gt;import &amp;quot;angular&amp;quot;;
import &amp;quot;angular-mocks&amp;quot;;

// require all test files using special Webpack feature
// https://webpack.github.io/docs/context.html#require-context
const testsContext = require.context(&amp;quot;.&amp;quot;, true, /\.test$/);
testsContext.keys().forEach(testsContext);
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Key here the initial imports to set up Angular and Angular mock globals. The rest uses Webpack's module API to require the test files.&lt;/p&gt;
&lt;h2 id="writing-an-angular-test"&gt;Writing an Angular test&lt;/h2&gt;
&lt;p&gt;With this in place, we can write a simple component controller test in ES6!&lt;/p&gt;
&lt;p&gt;&lt;a href="https://github.com/kamranayub/angularjs-sample-webpack-es6-karma/blob/master/src/dummy.component.test.js"&gt;https://github.com/kamranayub/angularjs-sample-webpack-es6-karma/blob/master/src/dummy.component.test.js&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;For more information on the pattern I'm using, check out &lt;a href="https://puigcerber.com/2016/02/07/how-to-test-angular-1-5-components/"&gt;Pablo's post on Angular 1.5 component testing&lt;/a&gt;.&lt;/p&gt;
</content:encoded>
		</item>
		<item>
			<title>Dynamically Importing React Material Icons Using Webpack</title>
			<link>https://kamranicus.com/posts/2017-09-02-dynamic-import-material-icons-react</link>
			<description>&lt;p&gt;The sample code for this post is &lt;a href="https://github.com/kamranayub/example-webpack-dynamic-import"&gt;available on my GitHub&lt;/a&gt;.&lt;/p&gt;</description>
			<guid>https://kamranicus.com/posts/2017-09-02-dynamic-import-material-icons-react</guid>
			<pubDate>Sun, 03 Sep 2017 03:10:00 GMT</pubDate>
			<content:encoded>&lt;p&gt;The sample code for this post is &lt;a href="https://github.com/kamranayub/example-webpack-dynamic-import"&gt;available on my GitHub&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;One of my team members was working on our app's navigation and for the icons we are using the &lt;a href="https://www.npmjs.com/package/material-ui-icons"&gt;material-ui-icons&lt;/a&gt; package. This is an npm package that provides the Material UI icons as React components. We're also using webpack for bundling and babel for transpiling.&lt;/p&gt;
&lt;p&gt;Their question was around how to dynamically reference these icon components within the navigation component. We dynamically build navigation from a JSON structure and need to load the appropriate icon for each item.&lt;/p&gt;
&lt;p&gt;Imagine something like this to represent some settings menu:&lt;/p&gt;
&lt;pre&gt;&lt;code class="language-js"&gt;{
  &amp;quot;name&amp;quot;: &amp;quot;Settings&amp;quot;,
  &amp;quot;children&amp;quot;: [
    {
      &amp;quot;name&amp;quot;: &amp;quot;Manage Alarms&amp;quot;,
      &amp;quot;icon&amp;quot;: &amp;quot;AccessAlarmIcon&amp;quot;
    }
  ]
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Somehow we need to import the appropriate icon from &lt;code&gt;material-ui-icons&lt;/code&gt; and reference it based on the &lt;code&gt;icon&lt;/code&gt; parameter:&lt;/p&gt;
&lt;pre&gt;&lt;code class="language-js"&gt;const MaterialIcon = ({ icon }) =&amp;gt; {
  
  // somehow resolve this icon
  let resolvedIcon = // ...

  return React.createElement(resolvedIcon)
}

const Navigation = (props) =&amp;gt;
  &amp;lt;nav&amp;gt;
    {props.children.map(item =&amp;gt; 
      &amp;lt;li&amp;gt;
        &amp;lt;MaterialIcon icon={item.icon} /&amp;gt;
        {item.name}
      &amp;lt;/li&amp;gt;
    )}
  &amp;lt;/nav&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;The initial solution was to just hardcode the logic:&lt;/p&gt;
&lt;pre&gt;&lt;code class="language-js"&gt;import AccessAlarmIcon from 'material-ui-icons/AccessAlarm'

const MaterialIcon = ({ icon }) =&amp;gt; {
  switch (icon) {
    case 'AccessAlarmIcon': return &amp;lt;AccessAlarmIcon /&amp;gt;
    default: return null
  }
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;But we knew this was a sub-optimal solution, it requires updating this file each time we want to support a new icon. There must be a better way!&lt;/p&gt;
&lt;h2 id="referencing-the-scope"&gt;Referencing the scope&lt;/h2&gt;
&lt;p&gt;At first, we tried referencing &lt;code&gt;AccessAlarmIcon&lt;/code&gt; imported variable directly since it should be in the scope of the module.&lt;/p&gt;
&lt;pre&gt;&lt;code class="language-js"&gt;import AccessAlarmIcon from 'material-ui-icons/AccessAlarm'

const MaterialIcon = ({ icon }) =&amp;gt; {
  return React.createElement(eval(icon))
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Yes, &lt;code&gt;eval&lt;/code&gt; is &lt;strong&gt;evil&lt;/strong&gt; but we wanted to see if it worked before trying a safer solution. It didn't work.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;Uncaught ReferenceError: AccessAlarmIcon is not defined
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Hmm, it should be, right? Wrong. Webpack is doing some bundling magic for us. The compiled code looks like this:&lt;/p&gt;
&lt;pre&gt;&lt;code class="language-js"&gt;var _AccessAlarm = __webpack_require__(70);
var _AccessAlarm2 = _interopRequireDefault(_AccessAlarm);
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;So first, it's not even named &lt;code&gt;AccessAlarmIcon&lt;/code&gt; at runtime and second, we have some webpack magic going on with variable naming and such.&lt;/p&gt;
&lt;h2 id="using-the-webpack-api"&gt;Using the Webpack API&lt;/h2&gt;
&lt;p&gt;I decided to look into this over the weekend since it was an interesting problem. After playing around for a bit, I decided to look and see what webpack could offer us via &lt;a href="https://webpack.js.org/api/module-methods/"&gt;its API&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;It turns out we can leverage &lt;code&gt;require&lt;/code&gt; to just use a convention-based method of dynamically importing the icons. Within a webpack context, it will handle resolving the dependency for us internally.&lt;/p&gt;
&lt;pre&gt;&lt;code class="language-js"&gt;const MaterialIcon = ({ icon }) =&amp;gt; {
    let iconName = icon.replace(/Icon$/, '')
    let resolved = require(`material-ui-icons/${iconName}`).default
    
    if (!resolved) {
        throw Error(`Could not find material-ui-icons/${iconName}`)
    }

    return React.createElement(resolved)
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Eyyy, look at that!&lt;/p&gt;
&lt;p&gt;&lt;img src="https://user-images.githubusercontent.com/563819/30000066-cacbb048-9024-11e7-9770-ae750984fb59.png" class="img-fluid" alt="Screenshot of icon" /&gt;&lt;/p&gt;
&lt;p&gt;Turned out to be a simple, straightforward solution but it wasn't immediately apparent.&lt;/p&gt;
&lt;h3 id="making-it-async"&gt;Making it async&lt;/h3&gt;
&lt;p&gt;You could also asynchronously load the icon using &lt;code&gt;import()&lt;/code&gt; which returns a native &lt;code&gt;Promise&lt;/code&gt; object. To make that work with React, we can use &lt;a href="https://github.com/ctrlplusb/react-async-component"&gt;react-async-component&lt;/a&gt; and create an async factory component:&lt;/p&gt;
&lt;pre&gt;&lt;code class="language-js"&gt;import { asyncComponent } from 'react-async-component'

const MaterialIconAsync = ({ icon }) =&amp;gt; {
    let iconName = icon.replace(/Icon$/, '')
    return React.createElement(asyncComponent({
        resolve: () =&amp;gt; import(
            /* webpackMode: &amp;quot;eager&amp;quot; */
            `material-ui-icons/${iconName}`)
    }))
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;I am using the &lt;a href="https://webpack.js.org/api/module-methods/#import-"&gt;&lt;em&gt;eager&lt;/em&gt; fetch mode&lt;/a&gt; to include all the Material icons vs. performing network requests to fetch them.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Note:&lt;/strong&gt; When using Babel with the new dynamic &lt;code&gt;import&lt;/code&gt; syntax, you'll need to install &lt;a href="https://babeljs.io/docs/plugins/syntax-dynamic-import/"&gt;syntax-dynamic-import&lt;/a&gt; preset and enable it.&lt;/p&gt;
</content:encoded>
		</item>
		<item>
			<title>Today I started at Target</title>
			<link>https://kamranicus.com/posts/2017-08-28-joined-target</link>
			<description>&lt;p&gt;Today marks a pretty big change in my career as I transition to a new software engineering role at &lt;a href="http://target.com"&gt;Target&lt;/a&gt;. That change comes after a 7 year stint at General Mills where I worked right out of college. I had an amazing time there and made lifelong friends. I'm hoping to continue the trend of working at great places! If you're looking for an awesome place to work, I encourage you to reach out to me for a referral or &lt;a href="http://careers.generalmills.com/job-search-results/?keyword=devops"&gt;apply online&lt;/a&gt; at General Mills if you want to work on DevOps stuff with a .NET stack.&lt;/p&gt;</description>
			<guid>https://kamranicus.com/posts/2017-08-28-joined-target</guid>
			<pubDate>Tue, 29 Aug 2017 02:20:00 GMT</pubDate>
			<content:encoded>&lt;p&gt;Today marks a pretty big change in my career as I transition to a new software engineering role at &lt;a href="http://target.com"&gt;Target&lt;/a&gt;. That change comes after a 7 year stint at General Mills where I worked right out of college. I had an amazing time there and made lifelong friends. I'm hoping to continue the trend of working at great places! If you're looking for an awesome place to work, I encourage you to reach out to me for a referral or &lt;a href="http://careers.generalmills.com/job-search-results/?keyword=devops"&gt;apply online&lt;/a&gt; at General Mills if you want to work on DevOps stuff with a .NET stack.&lt;/p&gt;
&lt;p&gt;My new role is on an internal product team where I'll be working on Node.js apps with Angular and React front-ends. It'll be a pretty big shift from doing primarily Microsoft stack and ASP.NET/C# to full stack JavaScript. Of course, I'm no stranger to these technologies but rather than developing in those stacks on side projects I'll be doing it full-time which should help me learn it a lot more deeply.&lt;/p&gt;
&lt;p&gt;I'm also excited because Target has a clear commitment towards open source and the greater community, being a major sponsor of almost every local conference and encouraging OSS contributions from its engineers. Expect to see more frequent blog posts and maybe even some open source project work as I take on my new role.&lt;/p&gt;
&lt;p&gt;My love for .NET won't be lost though, I'll still be plugging away at KTOMG, migrating to .NET Core and working on .NET Core OSS projects. I'm also trying to learn F# this year. On that note, I hope to come up with a consistent schedule to stream &lt;a href="http://twitch.tv/kamranicus"&gt;on Twitch&lt;/a&gt; so you can follow me there for updates.&lt;/p&gt;
</content:encoded>
		</item>
	</channel>
</rss>